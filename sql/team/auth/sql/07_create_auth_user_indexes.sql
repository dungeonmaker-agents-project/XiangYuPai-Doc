-- ==========================================
-- Alice - user è¡¨ç´¢å¼•ä¼˜åŒ–
-- ==========================================
-- è¯´æ˜: ä¸º xypai_auth.user è¡¨åˆ›å»ºé«˜æ•ˆç´¢å¼•
-- ç›®æ ‡: ä¼˜åŒ–ç™»å½•æŸ¥è¯¢æ€§èƒ½
-- ==========================================

USE `xypai_auth`;

-- ==========================================
-- user è¡¨ç´¢å¼•
-- ==========================================

-- å”¯ä¸€ç´¢å¼•ï¼ˆå·²åœ¨CREATE TABLEä¸­å®šä¹‰ï¼Œæ­¤å¤„éªŒè¯ï¼‰
SELECT 'âœ… å”¯ä¸€ç´¢å¼•å·²åˆ›å»º' AS notice,
       'uk_username, uk_mobile, uk_email' AS indexes;

-- çŠ¶æ€æŸ¥è¯¢ç´¢å¼•ï¼ˆé«˜é¢‘ï¼šç™»å½•æ—¶æ£€æŸ¥è´¦å·çŠ¶æ€ï¼‰
CREATE INDEX `idx_status` ON `user`(`status`);

-- åˆ›å»ºæ—¶é—´ç´¢å¼•ï¼ˆä¸­é¢‘ï¼šç»Ÿè®¡æ³¨å†Œè¶‹åŠ¿ï¼‰
CREATE INDEX `idx_created_at` ON `user`(`created_at`);

-- é€»è¾‘åˆ é™¤ç´¢å¼•ï¼ˆé«˜é¢‘ï¼šæ‰€æœ‰æŸ¥è¯¢éƒ½éœ€è¦è¿‡æ»¤å·²åˆ é™¤ç”¨æˆ·ï¼‰
CREATE INDEX `idx_deleted` ON `user`(`deleted`);

-- å¤åˆç´¢å¼•ï¼šæ‰‹æœºå·+çŠ¶æ€ï¼ˆæœ€é«˜é¢‘ï¼šç™»å½•éªŒè¯ï¼‰
CREATE INDEX `idx_mobile_status` ON `user`(`mobile`, `status`);

-- è´¦å·é”å®šç´¢å¼•ï¼ˆä¸­é¢‘ï¼šå®šæ—¶ä»»åŠ¡è§£é”è´¦å·ï¼‰
CREATE INDEX `idx_login_locked` ON `user`(`login_locked_until`);

-- å¤åˆç´¢å¼•ï¼šçŠ¶æ€+åˆ›å»ºæ—¶é—´ï¼ˆä¸­é¢‘ï¼šç®¡ç†åå°ç”¨æˆ·åˆ—è¡¨ï¼‰
CREATE INDEX `idx_status_created` ON `user`(`status`, `created_at`);

SELECT 'âœ… xypai_auth.user ç´¢å¼•åˆ›å»ºå®Œæˆ' AS status;
SELECT 'ğŸ“Š ç´¢å¼•æ•°é‡: 7ä¸ªï¼ˆ3ä¸ªå”¯ä¸€ç´¢å¼• + 4ä¸ªæ™®é€šç´¢å¼•ï¼‰' AS info;

-- éªŒè¯ç´¢å¼•
SHOW INDEX FROM `user`;

