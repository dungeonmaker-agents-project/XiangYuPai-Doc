-- ==========================================
-- Alice - è®¤è¯æ¨¡å—ä¸€é”®é‡ç½®è„šæœ¬
-- ==========================================
-- åŠŸèƒ½: é‡å»ºè¡¨ç»“æ„ + ç´¢å¼• + æµ‹è¯•æ•°æ®
-- âš ï¸ è­¦å‘Š: ä¼šåˆ é™¤xypai_authæ•°æ®åº“çš„æ‰€æœ‰è¡¨æ•°æ®
-- ç”¨é€”: å¼€å‘ç¯å¢ƒå¿«é€Ÿé‡ç½®
-- ==========================================

USE `xypai_auth`;

-- ==========================================
-- åˆ é™¤æ‰€æœ‰è¡¨ï¼ˆæŒ‰ä¾èµ–é¡ºåºï¼‰
-- ==========================================
DROP TABLE IF EXISTS `token_blacklist`;
DROP TABLE IF EXISTS `phone_verify_limit`;
DROP TABLE IF EXISTS `user_device`;
DROP TABLE IF EXISTS `sms_verification`;
DROP TABLE IF EXISTS `login_session`;

SELECT 'ğŸ”„ å·²åˆ é™¤æ‰€æœ‰è¡¨' AS status;

-- ==========================================
-- Step 1: åˆ›å»ºè¡¨ç»“æ„
-- ==========================================
SOURCE 02_create_tables.sql;

-- ==========================================
-- Step 2: åˆ›å»ºç´¢å¼•
-- ==========================================
SOURCE 03_create_indexes.sql;

-- ==========================================
-- Step 3: åˆå§‹åŒ–æµ‹è¯•æ•°æ®
-- ==========================================
SOURCE 04_init_test_data.sql;

-- ==========================================
-- Step 4: åˆ›å»ºå®šæ—¶ä»»åŠ¡
-- ==========================================
SOURCE 05_scheduled_tasks.sql;

-- ==========================================
-- éªŒè¯å®Œæˆ
-- ==========================================
SELECT 'ğŸ‰ Aliceè®¤è¯æ¨¡å— - é‡ç½®å®Œæˆï¼' AS message;

SELECT 
    TABLE_NAME AS 'è¡¨å',
    TABLE_ROWS AS 'è®°å½•æ•°',
    TABLE_COMMENT AS 'è¯´æ˜'
FROM information_schema.TABLES
WHERE TABLE_SCHEMA = 'xypai_auth'
ORDER BY TABLE_NAME;

-- ==========================================
-- ä½¿ç”¨è¯´æ˜
-- ==========================================
-- æ‰§è¡Œæ–¹å¼:
-- mysql -h 127.0.0.1 -u root -proot xypai_auth < 00_reset_all.sql
-- ==========================================

