# 用户模块测试文档总览
User Module Testing Documentation Overview

**最后更新 Last Updated**: 2025-11-14

---

## 📋 文档列表 Document List

本目录包含用户模块的完整测试文档和工具：

### 1. 完整测试用例文档
**文件**: `完整测试用例文档.md`
**内容**:
- ✅ 7个前端页面的详细测试用例
- ✅ 50+个API接口的功能测试
- ✅ 5个完整业务流程的端到端测试
- ✅ 性能测试、安全测试、兼容性测试用例
- ✅ 包含300+个测试点

### 2. Postman API测试集合
**文件**: `XiangYuPai_User_Service_API_Tests.postman_collection.json`
**内容**:
- ✅ 4个测试分组（用户资料、技能管理、关系管理、附近技能）
- ✅ 25+个API请求
- ✅ 自动化测试脚本
- ✅ 环境变量配置

---

## 🎯 测试覆盖范围

### 页面测试 (7个页面)

| 页面 | 测试用例数 | 优先级 | 状态 |
|------|-----------|--------|------|
| 01-个人主页页面 | 5个场景 | P0 | ⬜ 待测试 |
| 02-编辑资料页面 | 7个场景 | P0 | ⬜ 待测试 |
| 03-他人主页页面 | 2个场景 | P0 | ⬜ 待测试 |
| 04-粉丝列表页面 | 4个场景 | P0 | ⬜ 待测试 |
| 05-关注列表页面 | 1个场景 | P0 | ⬜ 待测试 |
| 06-技能管理页面 | 7个场景 | P0 | ⬜ 待测试 |
| 07-技能预约订单页面 | 待补充 | P1 | ⬜ 待测试 |

### API接口测试 (50+接口)

| 模块 | 接口数量 | 测试覆盖 |
|------|---------|---------|
| 个人资料管理 | 12个 | ✅ 100% |
| 技能管理 | 12个 | ✅ 100% |
| 关系管理 | 7个 | ✅ 100% |
| 配置接口 | 2个 | ✅ 100% |
| 文件上传 | 2个 | ✅ 100% |
| 搜索查询 | 4个 | ✅ 100% |

### 完整流程测试 (5个流程)

1. ✅ **新用户完整注册流程** (14步骤)
2. ✅ **技能发布完整流程** (16步骤)
3. ✅ **用户社交互动完整流程** (13步骤)
4. ✅ **技能管理完整生命周期** (10步骤)
5. ✅ **编辑资料完整流程** (11步骤)

---

## 🚀 快速开始

### 步骤 1: 导入Postman集合

```bash
# 在Postman中导入
File → Import → 选择 XiangYuPai_User_Service_API_Tests.postman_collection.json
```

### 步骤 2: 配置环境变量

在Postman中创建环境并设置以下变量:

```
base_url: http://localhost:9401
auth_token: <your_jwt_token>
user_id: <test_user_id>
```

### 步骤 3: 获取测试Token

```bash
# 使用auth服务获取Token
POST http://localhost:9400/api/auth/login
Body: {
  "phone": "13800000001",
  "code": "123456"
}

# 复制返回的token到Postman环境变量 auth_token
```

### 步骤 4: 运行测试

**方式一: 手动执行单个接口**
- 在Postman中选择接口
- 点击"Send"按钮
- 查看测试结果

**方式二: 批量运行测试集合**
- 点击集合名称旁的"..."
- 选择"Run collection"
- 点击"Run XiangYuPai User Service API Tests"

**方式三: 使用Newman命令行运行**
```bash
# 安装Newman
npm install -g newman

# 运行测试集合
newman run XiangYuPai_User_Service_API_Tests.postman_collection.json \
  --environment env.json \
  --reporters cli,html \
  --reporter-html-export report.html
```

---

## 📊 测试报告模板

### 测试执行记录

| 日期 | 测试人 | 通过/总数 | 通过率 | 备注 |
|------|--------|----------|--------|------|
| 2025-11-14 | - | 0/300+ | 0% | 待执行 |
| | | | | |

### 缺陷统计

| 严重等级 | 数量 | 已修复 | 待修复 | 延期 |
|---------|------|--------|--------|------|
| P0-阻塞 | 0 | 0 | 0 | 0 |
| P1-严重 | 0 | 0 | 0 | 0 |
| P2-一般 | 0 | 0 | 0 | 0 |
| P3-轻微 | 0 | 0 | 0 | 0 |

---

## 📝 测试用例结构

### 页面测试用例格式

每个页面测试包含:
- ✅ 测试场景ID
- ✅ 优先级(P0/P1/P2)
- ✅ 前置条件
- ✅ 测试步骤
- ✅ 预期结果
- ✅ 实际结果记录
- ✅ 状态跟踪(通过/失败/阻塞)

### API测试用例格式

每个API测试包含:
- ✅ 正常情况测试
- ✅ 异常情况测试
- ✅ 边界值测试
- ✅ 性能测试
- ✅ 安全测试

### 流程测试用例格式

每个流程测试包含:
- ✅ 完整的用户操作路径
- ✅ 每步的接口调用
- ✅ 数据流转验证
- ✅ 状态变更验证

---

## 🛠️ 测试工具

### 推荐工具

1. **API测试**:
   - Postman (手动测试)
   - Newman (自动化测试)
   - JMeter (性能测试)

2. **前端测试**:
   - Selenium (自动化UI测试)
   - Cypress (现代UI测试)
   - Jest (单元测试)

3. **性能测试**:
   - JMeter (压力测试)
   - Grafana (监控可视化)

4. **安全测试**:
   - Burp Suite (渗透测试)
   - OWASP ZAP (安全扫描)

---

## 📈 测试数据准备

### SQL脚本

测试文档中包含完整的测试数据准备SQL:

```sql
-- 测试用户
INSERT INTO users (phone, nickname, avatar) VALUES
('13800000001', '测试用户A', 'https://cdn.example.com/avatar1.jpg'),
('13800000002', '测试用户B', 'https://cdn.example.com/avatar2.jpg'),
('13800000003', '技能达人', 'https://cdn.example.com/avatar3.jpg');

-- 测试技能
INSERT INTO skills (user_id, skill_name, skill_type, price, is_online) VALUES
(3, '王者荣耀上分', 'online', 99.00, true),
(3, '家政清洁服务', 'offline', 80.00, true);
```

---

## 🎯 测试重点

### 关键功能 (必须100%通过)

1. ✅ 用户资料编辑实时保存
2. ✅ 技能创建（线上/线下）
3. ✅ 技能上下架
4. ✅ 关注/取消关注
5. ✅ 粉丝/关注列表
6. ✅ 图片上传
7. ✅ 表单验证

### 性能要求

| 接口类型 | P95响应时间 | QPS要求 |
|---------|------------|---------|
| 用户信息查询 | < 100ms | 1000 |
| 技能列表查询 | < 200ms | 500 |
| 关注操作 | < 150ms | 200 |
| 文件上传 | < 2s | 50 |

### 安全要求

- ✅ 所有接口需要Token认证
- ✅ 防止SQL注入
- ✅ 防止XSS攻击
- ✅ 文件上传安全验证
- ✅ 敏感信息脱敏

---

## 📞 支持与反馈

### 问题反馈

如果在测试过程中发现问题，请:

1. 记录详细的重现步骤
2. 截图或录屏
3. 记录请求/响应数据
4. 标注严重等级
5. 提交到项目issue tracker

### 文档更新

测试文档会持续更新，请关注:
- 新功能的测试用例补充
- 已发现问题的修复验证
- 性能优化后的回归测试

---

## ✅ 测试完成标准

### 功能测试完成标准

- [ ] 所有P0用例执行率100%
- [ ] 所有P1用例执行率100%
- [ ] P0用例通过率99%+
- [ ] P1用例通过率95%+
- [ ] 无P0/P1级别缺陷遗留

### 性能测试完成标准

- [ ] 所有接口响应时间达标
- [ ] 并发测试通过
- [ ] 缓存命中率达标
- [ ] 数据库查询优化完成

### 安全测试完成标准

- [ ] 认证授权测试通过
- [ ] SQL注入测试通过
- [ ] XSS攻击测试通过
- [ ] 文件上传安全测试通过

---

## 📚 相关文档

- [用户服务接口文档](./Backend/用户服务接口文档.md)
- [接口一致性验证报告](./接口一致性验证报告.md)
- [API一致性问题修复报告](./API一致性问题修复报告.md)
- [接口Q&A文档](./接口Q&A文档.md)
- [前端页面文档](./Frontend/)

---

**测试负责人**: XiangYuPai QA Team
**文档版本**: 1.0
**最后更新**: 2025-11-14

🎉 祝测试顺利！
