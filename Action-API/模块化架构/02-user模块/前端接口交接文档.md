# å‰ç«¯æ¥å£äº¤æ¥æ–‡æ¡£
Frontend Interface Handover Document

**äº¤æ¥æ—¥æœŸ Handover Date**: 2025-11-14
**åç«¯è´Ÿè´£äºº Backend Owner**: XiangYuPai Backend Team
**å‰ç«¯è´Ÿè´£äºº Frontend Owner**: To Be Assigned

---

## ğŸ“‹ æ–‡æ¡£ç›®çš„ Document Purpose

æœ¬æ–‡æ¡£æ˜¯ç”¨æˆ·æ¨¡å—åç«¯ä¸å‰ç«¯çš„æœ€åä¸€æ¬¡å¯¹æ¥æ–‡æ¡£ã€‚åç«¯æ¥å£å·²å…¨éƒ¨å¼€å‘å®Œæˆå¹¶é€šè¿‡éªŒè¯ï¼Œå‰ç«¯å¯åŸºäºæ­¤æ–‡æ¡£è¿›è¡Œå¼€å‘ã€‚ä¸‹æ¬¡å¯¹æ¥å°†åœ¨ç”Ÿäº§ä¸Šçº¿å‰è¿›è¡Œæœ€ç»ˆè”è°ƒæµ‹è¯•ã€‚

This is the final handover document between backend and frontend for the User module. All backend APIs have been completed and verified. Frontend can proceed with development based on this document. Next coordination will be for final integration testing before production deployment.

---

## âœ… æ¥å£éªŒè¯çŠ¶æ€ API Verification Status

### æ ¸å¿ƒæ¥å£å·²å®Œæˆ Core APIs Completed

| æ¨¡å— Module | æ¥å£æ•°é‡ Count | éªŒè¯çŠ¶æ€ Status | å¤‡æ³¨ Notes |
|------------|--------------|----------------|-----------|
| ç”¨æˆ·èµ„æ–™ç®¡ç† Profile | 12ä¸ª | âœ… å·²éªŒè¯ | å®æ—¶ä¿å­˜æœºåˆ¶ |
| æŠ€èƒ½ç®¡ç† Skills | 14ä¸ª | âœ… å·²éªŒè¯ | æ‹†åˆ†ä¸ºonline/offline |
| å…³ç³»ç®¡ç† Relations | 7ä¸ª | âœ… å·²éªŒè¯ | åŒ…å«å…³æ³¨/ç²‰ä¸/æ‹‰é»‘/ä¸¾æŠ¥ |
| é…ç½®æ¥å£ Config | 2ä¸ª | âœ… å·²éªŒè¯ | æ¸¸æˆåˆ—è¡¨/æœåŠ¡ç±»å‹ |
| æ–‡ä»¶ä¸Šä¼  Upload | 2ä¸ª | âœ… å·²éªŒè¯ | å¤´åƒ/æŠ€èƒ½å›¾ç‰‡ |
| **æ€»è®¡ Total** | **37ä¸ª** | **âœ… 100%** | **å…¨éƒ¨å®Œæˆ** |

---

## ğŸ”§ APIç«¯ç‚¹å˜æ›´è¯´æ˜ API Endpoint Changes

### âš ï¸ é‡è¦ï¼šè·¯å¾„å·²æ›´æ–° IMPORTANT: Paths Updated

ä¸ºä¿æŒAPIè§„èŒƒæ€§ï¼Œéƒ¨åˆ†è·¯å¾„å·²æ›´æ–°ä¸ºå¤æ•°å½¢å¼ï¼Œä½†ä¿ç•™äº†å‘åå…¼å®¹çš„åˆ«åï¼š

| æ—§è·¯å¾„ Old Path | æ–°è·¯å¾„ New Path | çŠ¶æ€ Status |
|----------------|----------------|-------------|
| `/api/user/skill/*` | `/api/user/skills/*` | âœ… ä¸¤è€…éƒ½å¯ç”¨ |
| `/api/users/fans` | `/api/user/relation/fans` | âœ… ä¸¤è€…éƒ½å¯ç”¨ |
| `/api/users/following` | `/api/user/relation/following` | âœ… ä¸¤è€…éƒ½å¯ç”¨ |
| `/api/users/{userId}/follow` | `/api/user/relation/follow/{userId}` | âœ… ä¸¤è€…éƒ½å¯ç”¨ |
| `/api/users/{userId}/profile` | `/api/user/profile/other/{userId}` | âœ… ä¸¤è€…éƒ½å¯ç”¨ |

**æ¨èåšæ³• Recommendation**:
- âœ… ä½¿ç”¨æ–°è·¯å¾„å¼€å‘ï¼ˆæ¨èï¼‰
- âœ… ä½¿ç”¨æ—§è·¯å¾„ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ
- ğŸ¯ ç”Ÿäº§ç¯å¢ƒå°†é€æ­¥åºŸå¼ƒæ—§è·¯å¾„

---

## ğŸ“± å‰ç«¯é¡µé¢å®Œæ•´æ¸…å• Frontend Pages Checklist

### é¡µé¢1: ä¸ªäººä¸»é¡µ (01-ä¸ªäººä¸»é¡µé¡µé¢.md)

**è·¯ç”±**: `/user/profile`

**æ‰€éœ€æ¥å£**:
```
âœ… GET  /api/user/profile/header         - è·å–å¤´éƒ¨ä¿¡æ¯
âœ… GET  /api/user/profile/posts          - è·å–åŠ¨æ€åˆ—è¡¨
âœ… GET  /api/user/profile/favorites      - è·å–æ”¶è—åˆ—è¡¨
âœ… GET  /api/user/profile/likes          - è·å–ç‚¹èµåˆ—è¡¨
âœ… GET  /api/user/profile/info           - è·å–èµ„æ–™ä¿¡æ¯
âœ… POST /api/moments/{momentId}/like     - ç‚¹èµåŠ¨æ€ (ContentService)
âœ… DEL  /api/moments/{momentId}/like     - å–æ¶ˆç‚¹èµ (ContentService)
```

**æ•°æ®ç»“æ„éªŒè¯**:
- [x] UserProfileHeader - åŒ…å«userId, nickname, avatar, stats
- [x] Post[] - åŒ…å«postId, content, images, video, stats
- [x] UserInfo - åŒ…å«å®Œæ•´ä¸ªäººèµ„æ–™+æŠ€èƒ½åˆ—è¡¨

**ç‰¹æ®Šè¯´æ˜**:
- åŠ¨æ€/æ”¶è—/ç‚¹èµåˆ—è¡¨æ•°æ®æ¥è‡ªContentServiceï¼Œæœ¬æ¨¡å—ä»…æä¾›ç”¨æˆ·ä¿¡æ¯
- æ”¯æŒä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½æ›´å¤š
- Tabç¼“å­˜ç­–ç•¥ï¼šç¼“å­˜å‰3é¡µæ•°æ®

---

### é¡µé¢2: ç¼–è¾‘èµ„æ–™ (02-ç¼–è¾‘èµ„æ–™é¡µé¢.md)

**è·¯ç”±**: `/user/profile/edit`

**æ‰€éœ€æ¥å£**:
```
âœ… GET  /api/user/profile/edit            - åŠ è½½ç¼–è¾‘æ•°æ®
âœ… POST /api/user/avatar/upload           - ä¸Šä¼ å¤´åƒ
âœ… PUT  /api/user/profile/nickname        - æ›´æ–°æ˜µç§°
âœ… PUT  /api/user/profile/gender          - æ›´æ–°æ€§åˆ«
âœ… PUT  /api/user/profile/birthday        - æ›´æ–°ç”Ÿæ—¥
âœ… PUT  /api/user/profile/residence       - æ›´æ–°å±…ä½åœ°
âœ… PUT  /api/user/profile/height          - æ›´æ–°èº«é«˜
âœ… PUT  /api/user/profile/weight          - æ›´æ–°ä½“é‡
âœ… PUT  /api/user/profile/occupation      - æ›´æ–°èŒä¸š
âœ… PUT  /api/user/profile/wechat          - æ›´æ–°å¾®ä¿¡å·
âœ… PUT  /api/user/profile/bio             - æ›´æ–°ä¸ªæ€§ç­¾å
```

**æ•°æ®ç»“æ„éªŒè¯**:
- [x] æ‰€æœ‰å­—æ®µçš„éªŒè¯è§„åˆ™å·²å®šä¹‰
- [x] å®æ—¶ä¿å­˜æœºåˆ¶å·²å®ç°
- [x] æ¯ä¸ªå­—æ®µç‹¬ç«‹æ›´æ–°

**ç‰¹æ®Šè¯´æ˜**:
- âš ï¸ **å®æ—¶ä¿å­˜**: å¤±å»ç„¦ç‚¹åè‡ªåŠ¨ä¿å­˜ï¼Œé˜²æŠ–300ms
- âš ï¸ **å¤´åƒä¸Šä¼ **: æœ€å¤§5MBï¼Œæ”¯æŒJPG/PNG
- âš ï¸ **å­—æ®µéªŒè¯**: å‰ç«¯éœ€éªŒè¯é•¿åº¦ã€æ ¼å¼ã€èŒƒå›´
- é€‰æ‹©ç±»å­—æ®µï¼ˆæ€§åˆ«/ç”Ÿæ—¥/å±…ä½åœ°ï¼‰: é€‰æ‹©åç«‹å³ä¿å­˜
- æ–‡æœ¬å­—æ®µ: å¤±å»ç„¦ç‚¹åä¿å­˜

**éªŒè¯è§„åˆ™**:
| å­—æ®µ | è§„åˆ™ |
|------|------|
| æ˜µç§° | 2-20å­—ç¬¦ï¼Œä¸å«ç‰¹æ®Šå­—ç¬¦ |
| èº«é«˜ | 100-250 cm |
| ä½“é‡ | 30-200 kg |
| å¾®ä¿¡å· | 6-20å­—ç¬¦ï¼Œä»…å­—æ¯æ•°å­—ä¸‹åˆ’çº¿å‡å· |
| ä¸ªæ€§ç­¾å | 0-200å­—ç¬¦ |

---

### é¡µé¢3: ä»–äººä¸»é¡µ (03-ä»–äººä¸»é¡µé¡µé¢.md)

**è·¯ç”±**: `/users/{userId}/profile`

**æ‰€éœ€æ¥å£**:
```
âœ… GET  /api/user/profile/other/{userId}     - è·å–ç”¨æˆ·ä¸»é¡µä¿¡æ¯
âœ… POST /api/user/relation/follow/{userId}   - å…³æ³¨ç”¨æˆ·
âœ… DEL  /api/user/relation/follow/{userId}   - å–æ¶ˆå…³æ³¨
âœ… GET  /api/users/{userId}/moments          - è·å–ç”¨æˆ·åŠ¨æ€ (ContentService)
âœ… GET  /api/user/skills/user/{userId}       - è·å–ç”¨æˆ·æŠ€èƒ½
âœ… GET  /api/users/{userId}/profile-detail   - è·å–ç”¨æˆ·è¯¦ç»†èµ„æ–™
âœ… POST /api/user/relation/report            - ä¸¾æŠ¥ç”¨æˆ·
âœ… POST /api/user/relation/block             - æ‹‰é»‘ç”¨æˆ·
```

**æ•°æ®ç»“æ„éªŒè¯**:
- [x] UserProfile - åŒ…å«privacyå­—æ®µï¼ˆéšç§æ§åˆ¶ï¼‰
- [x] followStatus - none/following/mutual
- [x] distance - è·ç¦»ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰

**ç‰¹æ®Šè¯´æ˜**:
- âš ï¸ **éšç§æ§åˆ¶**: æ ¹æ®privacyå­—æ®µæ§åˆ¶Tabæ˜¾ç¤º
- âš ï¸ **ä»˜è´¹å†…å®¹**: æ”¯æŒè§£é”ä»˜è´¹åŠ¨æ€
- âš ï¸ **è·ç¦»æ˜¾ç¤º**: < 1kmæ˜¾ç¤ºç±³ï¼Œ>= 1kmæ˜¾ç¤ºå…¬é‡Œ
- æ‹‰é»‘åè¿”å›ä¸Šä¸€é¡µæˆ–ä¸»é¡µ

**éšç§æƒé™**:
```typescript
privacy: {
  canViewProfile: boolean,   // æ˜¯å¦å¯æŸ¥çœ‹èµ„æ–™
  canViewMoments: boolean,   // æ˜¯å¦å¯æŸ¥çœ‹åŠ¨æ€
  canViewSkills: boolean     // æ˜¯å¦å¯æŸ¥çœ‹æŠ€èƒ½
}
```

---

### é¡µé¢4: ç²‰ä¸åˆ—è¡¨ (04-ç²‰ä¸åˆ—è¡¨é¡µé¢.md)

**è·¯ç”±**: `/user/fans`

**æ‰€éœ€æ¥å£**:
```
âœ… GET  /api/user/relation/fans              - è·å–ç²‰ä¸åˆ—è¡¨
âœ… GET  /api/user/relation/fans?keyword=xxx  - æœç´¢ç²‰ä¸
âœ… POST /api/user/relation/follow/{userId}   - å…³æ³¨ç²‰ä¸
âœ… DEL  /api/user/relation/follow/{userId}   - å–æ¶ˆå…³æ³¨
```

**æ•°æ®ç»“æ„éªŒè¯**:
- [x] Fan[] - åŒ…å«userId, nickname, avatar, followStatus
- [x] followStatus - none/following/mutual

**ç‰¹æ®Šè¯´æ˜**:
- æœç´¢é˜²æŠ–: 500ms
- æ”¯æŒä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½
- å…³æ³¨æŒ‰é’®çŠ¶æ€: æœªå…³æ³¨/å·²å…³æ³¨/äº’ç›¸å…³æ³¨

---

### é¡µé¢5: å…³æ³¨åˆ—è¡¨ (05-å…³æ³¨åˆ—è¡¨é¡µé¢.md)

**è·¯ç”±**: `/user/following`

**æ‰€éœ€æ¥å£**:
```
âœ… GET  /api/user/relation/following             - è·å–å…³æ³¨åˆ—è¡¨
âœ… GET  /api/user/relation/following?keyword=xxx - æœç´¢å…³æ³¨
âœ… DEL  /api/user/relation/follow/{userId}       - å–æ¶ˆå…³æ³¨
```

**æ•°æ®ç»“æ„éªŒè¯**:
- [x] Following[] - åŒ…å«userId, nickname, avatar, followStatus
- [x] followStatus - following/mutual (ä»…è¿™ä¸¤ç§)

**ç‰¹æ®Šè¯´æ˜**:
- ä¸ç²‰ä¸åˆ—è¡¨ç±»ä¼¼ä½†åªèƒ½å–æ¶ˆå…³æ³¨
- å–æ¶ˆå…³æ³¨éœ€è¦ç¡®è®¤å¯¹è¯æ¡†
- æä¾›"å»å‘ç°"æŒ‰é’®å¼•å¯¼

---

### é¡µé¢6: æŠ€èƒ½ç®¡ç† (06-æŠ€èƒ½ç®¡ç†é¡µé¢.md)

**è·¯ç”±**: `/user/skills`

**æ‰€éœ€æ¥å£**:
```
âœ… GET  /api/skills/config                       - è·å–æŠ€èƒ½é…ç½®
âœ… GET  /api/user/skills/my                      - è·å–æˆ‘çš„æŠ€èƒ½åˆ—è¡¨
âœ… POST /api/user/skills/online                  - åˆ›å»ºçº¿ä¸ŠæŠ€èƒ½
âœ… POST /api/user/skills/offline                 - åˆ›å»ºçº¿ä¸‹æŠ€èƒ½
âœ… POST /api/skills/images/upload                - ä¸Šä¼ æŠ€èƒ½å›¾ç‰‡
âœ… GET  /api/user/skills/{skillId}               - è·å–æŠ€èƒ½è¯¦æƒ…
âœ… PUT  /api/user/skills/online/{skillId}        - æ›´æ–°çº¿ä¸ŠæŠ€èƒ½
âœ… PUT  /api/user/skills/offline/{skillId}       - æ›´æ–°çº¿ä¸‹æŠ€èƒ½
âœ… DEL  /api/user/skills/{skillId}               - åˆ é™¤æŠ€èƒ½
âœ… PUT  /api/user/skills/{skillId}/toggle        - åˆ‡æ¢ä¸Šä¸‹æ¶
```

**æ•°æ®ç»“æ„éªŒè¯**:
- [x] SkillConfig - games[], serviceTypes[]
- [x] OnlineSkillCreateDto - gameName, gameRankå¿…å¡«
- [x] OfflineSkillCreateDto - serviceType, location, availableTimeså¿…å¡«

**ç‰¹æ®Šè¯´æ˜**:
- âš ï¸ **æŠ€èƒ½ç±»å‹åˆ†ç¦»**: çº¿ä¸Šå’Œçº¿ä¸‹ä½¿ç”¨ä¸åŒçš„åˆ›å»º/æ›´æ–°æ¥å£
- âš ï¸ **æ¸¸æˆé…ç½®**: å…ˆè°ƒç”¨/api/skills/configè·å–æ¸¸æˆåˆ—è¡¨
- âš ï¸ **å›¾ç‰‡ä¸Šä¼ **: æœ€å¤š9å¼ ï¼Œæ¯å¼ æœ€å¤§5MB
- âš ï¸ **å¯ç”¨æ—¶é—´**: çº¿ä¸‹æŠ€èƒ½å¿…é¡»è®¾ç½®ï¼Œçº¿ä¸ŠæŠ€èƒ½ä¸éœ€è¦

**æ¸¸æˆé…ç½®ç¤ºä¾‹**:
```json
{
  "games": [
    {
      "gameId": "wzry",
      "gameName": "ç‹è€…è£è€€",
      "ranks": ["é’é“œ", "ç™½é“¶", "é»„é‡‘", "é“‚é‡‘", "é’»çŸ³", "æ˜Ÿè€€", "ç‹è€…"]
    }
  ],
  "serviceTypes": [
    {
      "typeId": "cleaning",
      "typeName": "å®¶æ”¿æœåŠ¡",
      "icon": "https://..."
    }
  ]
}
```

**çº¿ä¸ŠæŠ€èƒ½åˆ›å»ºç¤ºä¾‹**:
```json
{
  "coverImage": "https://...",
  "gameName": "ç‹è€…è£è€€",
  "gameRank": "ç‹è€…",
  "skillName": "ç‹è€…è£è€€ä¸Šåˆ†å¸¦ç»ƒ",
  "description": "...",
  "price": 99.00,
  "serviceHours": 1.5,
  "images": ["https://...", "https://..."],
  "promises": ["å‡†æ—¶å¼€å§‹", "è€å¿ƒæŒ‡å¯¼"],
  "isOnline": true
}
```

**çº¿ä¸‹æŠ€èƒ½åˆ›å»ºç¤ºä¾‹**:
```json
{
  "coverImage": "https://...",
  "serviceType": "cleaning",
  "skillName": "ä¸“ä¸šå®¶åº­æ¸…æ´æœåŠ¡",
  "description": "...",
  "price": 80.00,
  "location": {
    "address": "å¹¿ä¸œçœå¹¿å·å¸‚å¤©æ²³åŒºç æ±Ÿæ–°åŸ",
    "latitude": 23.1200,
    "longitude": 113.3240
  },
  "availableTimes": [
    {"dayOfWeek": 1, "startTime": "09:00", "endTime": "18:00"}
  ],
  "images": ["https://..."],
  "promises": ["ä¸Šé—¨æœåŠ¡", "å·¥å…·é½å…¨"],
  "isOnline": false
}
```

---

### é¡µé¢7: æŠ€èƒ½é¢„çº¦è®¢å• (07-æŠ€èƒ½é¢„çº¦è®¢å•é¡µé¢.md)

**è·¯ç”±**: `/skills/{skillId}/booking`, `/orders/{orderId}`

**æ‰€éœ€æ¥å£**:
```
âœ… GET  /api/skills/{skillId}/booking-detail - è·å–æŠ€èƒ½é¢„çº¦è¯¦æƒ…
âœ… GET  /api/skills/{skillId}/reviews        - è·å–æŠ€èƒ½è¯„ä»·
âš ï¸  GET  /api/orders/confirm-info/{skillId} - è·å–è®¢å•ç¡®è®¤ä¿¡æ¯ (OrderService)
âš ï¸  POST /api/orders/create                 - åˆ›å»ºè®¢å• (OrderService)
âš ï¸  GET  /api/orders/{orderId}              - è·å–è®¢å•è¯¦æƒ… (OrderService)
```

**ç‰¹æ®Šè¯´æ˜**:
- âš ï¸ **è·¨æ¨¡å—ä¾èµ–**: è®¢å•ç›¸å…³æ¥å£å±äºOrderServiceï¼ˆtradeæ¨¡å—ï¼‰
- æœ¬æ¨¡å—åªæä¾›æŠ€èƒ½è¯¦æƒ…å’Œè¯„ä»·åˆ—è¡¨
- è®¢å•åˆ›å»ºå’Œç®¡ç†ç”±tradeæ¨¡å—è´Ÿè´£

---

## ğŸ”‘ è®¤è¯æˆæƒ Authentication & Authorization

### Tokenä½¿ç”¨

**è¯·æ±‚å¤´æ ¼å¼**:
```http
Authorization: Bearer <token>
```

**è·å–Token**:
```
POST http://localhost:9400/api/auth/login
Body: {
  "phone": "13800000001",
  "code": "123456"
}

Response: {
  "code": 200,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "userId": 123,
    "nickname": "æµ‹è¯•ç”¨æˆ·"
  }
}
```

### é”™è¯¯ç ç»Ÿä¸€å¤„ç†

| HTTPçŠ¶æ€ç  | å«ä¹‰ | å‰ç«¯å¤„ç† |
|-----------|------|---------|
| 200 | æˆåŠŸ | æ­£å¸¸å¤„ç† |
| 400 | å‚æ•°é”™è¯¯ | æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ |
| 401 | æœªç™»å½•/Tokenè¿‡æœŸ | è·³è½¬ç™»å½•é¡µ |
| 403 | æ— æƒé™ | æ˜¾ç¤ºæƒé™æç¤º |
| 404 | èµ„æºä¸å­˜åœ¨ | æ˜¾ç¤ºä¸å­˜åœ¨æç¤º |
| 409 | å†²çªï¼ˆå¦‚é‡å¤å…³æ³¨ï¼‰ | æ˜¾ç¤ºå†²çªæç¤º |
| 500 | æœåŠ¡å™¨é”™è¯¯ | æ˜¾ç¤ºé‡è¯•æç¤º |

### ç»Ÿä¸€å“åº”æ ¼å¼

```typescript
interface Response<T> {
  code: number;      // ä¸šåŠ¡çŠ¶æ€ç ï¼Œ200è¡¨ç¤ºæˆåŠŸ
  message: string;   // æç¤ºä¿¡æ¯
  data: T;           // ä¸šåŠ¡æ•°æ®
}
```

**åˆ†é¡µå“åº”æ ¼å¼**:
```typescript
interface PageResponse<T> {
  code: number;
  message: string;
  data: {
    rows: T[];           // æ•°æ®åˆ—è¡¨
    total: number;       // æ€»æ•°
    pageNum: number;     // å½“å‰é¡µ
    pageSize: number;    // æ¯é¡µæ•°é‡
  };
}
```

---

## ğŸŒ ç¯å¢ƒé…ç½® Environment Configuration

### å¼€å‘ç¯å¢ƒ
```
åç«¯åœ°å€: http://localhost:9401
æ•°æ®åº“: xypai_user_dev
```

### æµ‹è¯•ç¯å¢ƒ
```
åç«¯åœ°å€: http://test.xypai.com:9401
æ•°æ®åº“: xypai_user_test
```

### ç”Ÿäº§ç¯å¢ƒ
```
åç«¯åœ°å€: https://api.xypai.com
æ•°æ®åº“: xypai_user_prod
```

---

## ğŸ“ å‰ç«¯å¼€å‘å»ºè®® Frontend Development Recommendations

### 1. çŠ¶æ€ç®¡ç†å»ºè®®

æ¨èä½¿ç”¨ä»¥ä¸‹çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼š

```typescript
// ç”¨æˆ·ä¿¡æ¯å…¨å±€çŠ¶æ€
interface UserState {
  userInfo: UserInfo | null;
  isLogin: boolean;
  token: string;
}

// é¡µé¢å±€éƒ¨çŠ¶æ€
interface PageState {
  data: any[];
  isLoading: boolean;
  error: string | null;
  page: number;
  hasMore: boolean;
}
```

### 2. æ¥å£å°è£…å»ºè®®

```typescript
// api/user.ts
export const userApi = {
  // è·å–ä¸ªäººä¸»é¡µå¤´éƒ¨
  getProfileHeader: () => request.get('/api/user/profile/header'),

  // æ›´æ–°æ˜µç§°
  updateNickname: (nickname: string) =>
    request.put('/api/user/profile/nickname', { nickname }),

  // å…³æ³¨ç”¨æˆ·
  followUser: (userId: string) =>
    request.post(`/api/user/relation/follow/${userId}`),
};

// api/skill.ts
export const skillApi = {
  // è·å–æŠ€èƒ½é…ç½®
  getSkillConfig: () => request.get('/api/skills/config'),

  // åˆ›å»ºçº¿ä¸ŠæŠ€èƒ½
  createOnlineSkill: (data: OnlineSkillCreateDto) =>
    request.post('/api/user/skills/online', data),

  // åˆ›å»ºçº¿ä¸‹æŠ€èƒ½
  createOfflineSkill: (data: OfflineSkillCreateDto) =>
    request.post('/api/user/skills/offline', data),
};
```

### 3. é”™è¯¯å¤„ç†å»ºè®®

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
const handleError = (error: any) => {
  if (error.response) {
    const { status, data } = error.response;

    switch (status) {
      case 401:
        // Tokenè¿‡æœŸï¼Œè·³è½¬ç™»å½•
        router.push('/login');
        break;
      case 403:
        // æ— æƒé™
        Toast.show('æ— æƒé™è®¿é—®');
        break;
      case 404:
        // èµ„æºä¸å­˜åœ¨
        Toast.show(data.message || 'èµ„æºä¸å­˜åœ¨');
        break;
      default:
        // å…¶ä»–é”™è¯¯
        Toast.show(data.message || 'æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
    }
  } else {
    // ç½‘ç»œé”™è¯¯
    Toast.show('ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
  }
};
```

### 4. å®æ—¶ä¿å­˜å®ç°å»ºè®®

```typescript
// ç¼–è¾‘èµ„æ–™é¡µé¢çš„å®æ—¶ä¿å­˜
const useAutoSave = (field: string, value: any, validateFn: Function) => {
  const [status, setStatus] = useState<'idle' | 'saving' | 'success' | 'error'>('idle');
  const [error, setError] = useState('');

  // é˜²æŠ–ä¿å­˜
  const debouncedSave = useDebounce(async () => {
    // å‰ç«¯éªŒè¯
    const validation = validateFn(value);
    if (!validation.valid) {
      setError(validation.error);
      setStatus('error');
      return;
    }

    // è°ƒç”¨API
    setStatus('saving');
    try {
      await userApi[`update${capitalize(field)}`](value);
      setStatus('success');
      setTimeout(() => setStatus('idle'), 500);
    } catch (err) {
      setStatus('error');
      setError('ä¿å­˜å¤±è´¥');
    }
  }, 300);

  useEffect(() => {
    if (value) {
      debouncedSave();
    }
  }, [value]);

  return { status, error };
};
```

### 5. å›¾ç‰‡ä¸Šä¼ å»ºè®®

```typescript
const uploadImage = async (file: File, type: 'avatar' | 'skill') => {
  // å‰ç«¯éªŒè¯
  if (!['image/jpeg', 'image/png'].includes(file.type)) {
    throw new Error('ä»…æ”¯æŒJPGã€PNGæ ¼å¼');
  }

  if (file.size > 5 * 1024 * 1024) {
    throw new Error('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MB');
  }

  // å‹ç¼©å›¾ç‰‡ï¼ˆå¯é€‰ï¼‰
  const compressed = await compressImage(file);

  // ä¸Šä¼ 
  const formData = new FormData();
  formData.append(type === 'avatar' ? 'avatar' : 'image', compressed);

  const endpoint = type === 'avatar'
    ? '/api/user/avatar/upload'
    : '/api/skills/images/upload';

  const response = await request.post(endpoint, formData, {
    headers: { 'Content-Type': 'multipart/form-data' },
    onUploadProgress: (progressEvent) => {
      const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);
      // æ›´æ–°ä¸Šä¼ è¿›åº¦
    }
  });

  return response.data;
};
```

---

## âœ… å‰ç«¯å¼€å‘æ£€æŸ¥æ¸…å• Frontend Development Checklist

### åŸºç¡€é…ç½®

- [ ] é…ç½®åç«¯APIåœ°å€ï¼ˆå¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒï¼‰
- [ ] é…ç½®è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆæ·»åŠ Tokenï¼‰
- [ ] é…ç½®å“åº”æ‹¦æˆªå™¨ï¼ˆç»Ÿä¸€é”™è¯¯å¤„ç†ï¼‰
- [ ] å®ç°Tokenå­˜å‚¨å’Œåˆ·æ–°æœºåˆ¶
- [ ] å®ç°è·¯ç”±å®ˆå«ï¼ˆç™»å½•éªŒè¯ï¼‰

### é¡µé¢å¼€å‘

- [ ] **01-ä¸ªäººä¸»é¡µ**: å¤´éƒ¨ä¿¡æ¯ã€4ä¸ªTabã€åˆ†é¡µåŠ è½½
- [ ] **02-ç¼–è¾‘èµ„æ–™**: 11ä¸ªå­—æ®µå®æ—¶ä¿å­˜ã€å¤´åƒä¸Šä¼ 
- [ ] **03-ä»–äººä¸»é¡µ**: éšç§æ§åˆ¶ã€å…³æ³¨æ“ä½œã€ä¸¾æŠ¥æ‹‰é»‘
- [ ] **04-ç²‰ä¸åˆ—è¡¨**: åˆ—è¡¨å±•ç¤ºã€æœç´¢ã€å…³æ³¨æ“ä½œ
- [ ] **05-å…³æ³¨åˆ—è¡¨**: åˆ—è¡¨å±•ç¤ºã€æœç´¢ã€å–æ¶ˆå…³æ³¨
- [ ] **06-æŠ€èƒ½ç®¡ç†**: Tabåˆ‡æ¢ã€åˆ›å»ºï¼ˆonline/offlineï¼‰ã€ç¼–è¾‘ã€åˆ é™¤
- [ ] **07-æŠ€èƒ½é¢„çº¦**: æŠ€èƒ½è¯¦æƒ…ã€è®¢å•ç¡®è®¤ï¼ˆç­‰å¾…OrderServiceï¼‰

### åŠŸèƒ½å®ç°

- [ ] å®æ—¶ä¿å­˜æœºåˆ¶ï¼ˆ300msé˜²æŠ–ï¼‰
- [ ] å›¾ç‰‡ä¸Šä¼ ï¼ˆå‹ç¼©ã€è¿›åº¦æ˜¾ç¤ºï¼‰
- [ ] ä¹è§‚æ›´æ–°ï¼ˆå…³æ³¨/ç‚¹èµæ“ä½œï¼‰
- [ ] åˆ†é¡µåŠ è½½ï¼ˆä¸‹æ‹‰åˆ·æ–°ã€ä¸Šæ‹‰åŠ è½½æ›´å¤šï¼‰
- [ ] æœç´¢é˜²æŠ–ï¼ˆ500msï¼‰
- [ ] ç¼“å­˜ç­–ç•¥ï¼ˆTabåˆ‡æ¢ç¼“å­˜ï¼‰
- [ ] ç©ºçŠ¶æ€å¤„ç†
- [ ] é”™è¯¯æç¤º
- [ ] åŠ è½½çŠ¶æ€

### æ•°æ®éªŒè¯

- [ ] æ˜µç§°éªŒè¯ï¼ˆ2-20å­—ç¬¦ï¼‰
- [ ] èº«é«˜éªŒè¯ï¼ˆ100-250ï¼‰
- [ ] ä½“é‡éªŒè¯ï¼ˆ30-200ï¼‰
- [ ] å¾®ä¿¡å·éªŒè¯ï¼ˆ6-20å­—ç¬¦ï¼Œæ ¼å¼ï¼‰
- [ ] æŠ€èƒ½åç§°éªŒè¯ï¼ˆ2-50å­—ç¬¦ï¼‰
- [ ] æŠ€èƒ½ä»‹ç»éªŒè¯ï¼ˆ10-500å­—ç¬¦ï¼‰
- [ ] ä»·æ ¼éªŒè¯ï¼ˆ>0ï¼‰
- [ ] å›¾ç‰‡æ ¼å¼éªŒè¯ï¼ˆJPG/PNGï¼‰
- [ ] å›¾ç‰‡å¤§å°éªŒè¯ï¼ˆ<5MBï¼‰

### ç”¨æˆ·ä½“éªŒ

- [ ] åŠ è½½åŠ¨ç”»/éª¨æ¶å±
- [ ] Toastæç¤º
- [ ] ç¡®è®¤å¯¹è¯æ¡†
- [ ] å›¾ç‰‡æ‡’åŠ è½½
- [ ] åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆæ•°é‡>1000ï¼‰
- [ ] ä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»
- [ ] ä¸Šæ‹‰åŠ è½½æç¤º
- [ ] ç©ºçŠ¶æ€æ’å›¾å’Œæ–‡æ¡ˆ
- [ ] é”™è¯¯é‡è¯•æœºåˆ¶

---

## ğŸ“ å¯¹æ¥è”ç³»æ–¹å¼ Contact Information

### åç«¯æ”¯æŒ

**æŠ€æœ¯æ”¯æŒç¾¤**: XiangYuPaiå¼€å‘ç¾¤
**ç´§æ€¥è”ç³»**: Backend Team Lead

### å¸¸è§é—®é¢˜å¤„ç†

| é—®é¢˜ç±»å‹ | è”ç³»æ–¹å¼ | å“åº”æ—¶é—´ |
|---------|---------|---------|
| æ¥å£404é”™è¯¯ | æŠ€æœ¯æ”¯æŒç¾¤ | 30åˆ†é’Ÿå†… |
| æ•°æ®æ ¼å¼é—®é¢˜ | æŠ€æœ¯æ”¯æŒç¾¤ | 1å°æ—¶å†… |
| æ€§èƒ½é—®é¢˜ | ç›´æ¥è”ç³»åç«¯è´Ÿè´£äºº | 2å°æ—¶å†… |
| æ–°å¢éœ€æ±‚ | æäº¤éœ€æ±‚æ–‡æ¡£ | 1ä¸ªå·¥ä½œæ—¥ |

---

## ğŸ“š å‚è€ƒæ–‡æ¡£ Reference Documents

### å¿…è¯»æ–‡æ¡£

1. âœ… `ç”¨æˆ·æœåŠ¡æ¥å£æ–‡æ¡£.md` - å®Œæ•´APIæ–‡æ¡£
2. âœ… `APIä¸€è‡´æ€§é—®é¢˜ä¿®å¤æŠ¥å‘Š.md` - æ¥å£å˜æ›´è¯´æ˜
3. âœ… `å®Œæ•´æµ‹è¯•ç”¨ä¾‹æ–‡æ¡£.md` - 300+æµ‹è¯•ç”¨ä¾‹
4. âœ… `XiangYuPai_User_Service_API_Tests.postman_collection.json` - Postmanæµ‹è¯•é›†åˆ

### å‰ç«¯é¡µé¢æ–‡æ¡£

1. âœ… `01-ä¸ªäººä¸»é¡µé¡µé¢.md`
2. âœ… `02-ç¼–è¾‘èµ„æ–™é¡µé¢.md`
3. âœ… `03-ä»–äººä¸»é¡µé¡µé¢.md`
4. âœ… `04-ç²‰ä¸åˆ—è¡¨é¡µé¢.md`
5. âœ… `05-å…³æ³¨åˆ—è¡¨é¡µé¢.md`
6. âœ… `06-æŠ€èƒ½ç®¡ç†é¡µé¢.md`
7. âœ… `07-æŠ€èƒ½é¢„çº¦è®¢å•é¡µé¢.md`

### é¢å¤–å‚è€ƒ

- `æ¥å£Q&Aæ–‡æ¡£.md` - å¸¸è§é—®é¢˜è§£ç­”
- `æµ‹è¯•æ–‡æ¡£README.md` - æµ‹è¯•è¯´æ˜

---

## ğŸš¨ é‡ç‚¹æ³¨æ„äº‹é¡¹ Important Notes

### âš ï¸ å¿…é¡»æ³¨æ„çš„äº‹é¡¹

1. **å®æ—¶ä¿å­˜**: ç¼–è¾‘èµ„æ–™é¡µé¢çš„æ‰€æœ‰å­—æ®µéƒ½æ˜¯å®æ—¶ä¿å­˜ï¼Œä¸æ˜¯æ‰¹é‡æäº¤
2. **æŠ€èƒ½ç±»å‹**: çº¿ä¸Šå’Œçº¿ä¸‹æŠ€èƒ½ä½¿ç”¨ä¸åŒçš„åˆ›å»ºå’Œæ›´æ–°æ¥å£
3. **è·¯å¾„å˜æ›´**: æ¨èä½¿ç”¨æ–°è·¯å¾„ï¼ˆpluralå½¢å¼ï¼‰ï¼Œæ—§è·¯å¾„ä¹Ÿèƒ½ç”¨ä½†å°†é€æ­¥åºŸå¼ƒ
4. **å›¾ç‰‡ä¸Šä¼ **: å…ˆä¸Šä¼ å›¾ç‰‡è·å–URLï¼Œå†æäº¤è¡¨å•æ—¶ä½¿ç”¨URL
5. **Tokenè®¤è¯**: æ‰€æœ‰æ¥å£éƒ½éœ€è¦Tokenï¼Œ401æ—¶è·³è½¬ç™»å½•
6. **éšç§æ§åˆ¶**: ä»–äººä¸»é¡µéœ€è¦æ ¹æ®privacyå­—æ®µæ§åˆ¶Tabæ˜¾ç¤º
7. **ä¹è§‚æ›´æ–°**: å…³æ³¨/ç‚¹èµæ“ä½œä½¿ç”¨ä¹è§‚æ›´æ–°æå‡ä½“éªŒ
8. **é˜²æŠ–æœºåˆ¶**: æœç´¢500msï¼Œå®æ—¶ä¿å­˜300ms

### âš ï¸ å¾…OrderServiceå®Œæˆçš„åŠŸèƒ½

ä»¥ä¸‹åŠŸèƒ½ä¾èµ–OrderServiceï¼ˆtradeæ¨¡å—ï¼‰ï¼Œæš‚æ—¶æ— æ³•å®Œå…¨æµ‹è¯•ï¼š

- [ ] æŠ€èƒ½é¢„çº¦è®¢å•ç¡®è®¤
- [ ] è®¢å•åˆ›å»ºå’Œæ”¯ä»˜
- [ ] è®¢å•è¯¦æƒ…æŸ¥çœ‹
- [ ] è®¢å•çŠ¶æ€ç®¡ç†

**å¤„ç†æ–¹æ¡ˆ**: å‰ç«¯å¯ä»¥å…ˆå®ŒæˆUIå¼€å‘ï¼Œæ¥å£è°ƒç”¨éƒ¨åˆ†ä½¿ç”¨Mockæ•°æ®ï¼Œç­‰OrderServiceå°±ç»ªåå†å¯¹æ¥çœŸå®æ¥å£ã€‚

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’ Next Steps

### å‰ç«¯å¼€å‘é˜¶æ®µ (Now - 4å‘¨)

1. **Week 1**: åŸºç¡€é…ç½®ã€ç”¨æˆ·èµ„æ–™ç›¸å…³é¡µé¢ï¼ˆé¡µé¢1ã€2ï¼‰
2. **Week 2**: ç¤¾äº¤ç›¸å…³é¡µé¢ï¼ˆé¡µé¢3ã€4ã€5ï¼‰
3. **Week 3**: æŠ€èƒ½ç®¡ç†é¡µé¢ï¼ˆé¡µé¢6ï¼‰
4. **Week 4**: æŠ€èƒ½é¢„çº¦é¡µé¢ï¼ˆé¡µé¢7ï¼ŒUIå…ˆè¡Œï¼‰ã€æ•´ä½“è”è°ƒ

### è”è°ƒæµ‹è¯•é˜¶æ®µ (4å‘¨å)

1. **æ¥å£è”è°ƒ**: å‰åç«¯æ¥å£å¯¹æ¥æµ‹è¯•
2. **åŠŸèƒ½æµ‹è¯•**: å®Œæ•´æµç¨‹æµ‹è¯•
3. **æ€§èƒ½æµ‹è¯•**: å“åº”æ—¶é—´ã€å¹¶å‘æµ‹è¯•
4. **å…¼å®¹æ€§æµ‹è¯•**: æµè§ˆå™¨ã€è®¾å¤‡å…¼å®¹æ€§

### ç”Ÿäº§ä¸Šçº¿å‰ (6å‘¨å)

1. **æœ€ç»ˆéªŒæ”¶**: æ‰€æœ‰åŠŸèƒ½éªŒæ”¶
2. **æ€§èƒ½ä¼˜åŒ–**: é’ˆå¯¹æ€§èƒ½ç“¶é¢ˆä¼˜åŒ–
3. **å®‰å…¨æ£€æŸ¥**: å®‰å…¨æ¼æ´æ‰«æ
4. **ç°åº¦å‘å¸ƒ**: å°æµé‡ç°åº¦æµ‹è¯•
5. **æ­£å¼ä¸Šçº¿**: å…¨é‡å‘å¸ƒ

---

## âœï¸ ç­¾ç½²ç¡®è®¤ Sign-off Confirmation

### åç«¯ç¡®è®¤

- [ ] æ¥å£å¼€å‘å®Œæˆ
- [ ] æ¥å£æ–‡æ¡£é½å…¨
- [ ] æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- [ ] Postmané›†åˆå¯ç”¨

**ç­¾ç½²äºº**: _________________
**æ—¥æœŸ**: 2025-11-14

### å‰ç«¯ç¡®è®¤

- [ ] å·²æ”¶åˆ°æ¥å£æ–‡æ¡£
- [ ] å·²ç†è§£æ¥å£è§„èŒƒ
- [ ] å·²å¯¼å…¥Postmané›†åˆ
- [ ] å·²æ˜ç¡®å¼€å‘è®¡åˆ’

**ç­¾ç½²äºº**: _________________
**æ—¥æœŸ**: _________________

---

## ğŸ“Š é™„å½•ï¼šæ¥å£å¿«é€Ÿç´¢å¼• Appendix: Quick API Index

### ç”¨æˆ·èµ„æ–™ç±»

| æ¥å£ | æ–¹æ³• | è·¯å¾„ |
|------|------|------|
| è·å–å¤´éƒ¨ä¿¡æ¯ | GET | /api/user/profile/header |
| åŠ è½½ç¼–è¾‘æ•°æ® | GET | /api/user/profile/edit |
| ä¸Šä¼ å¤´åƒ | POST | /api/user/avatar/upload |
| æ›´æ–°æ˜µç§° | PUT | /api/user/profile/nickname |
| æ›´æ–°æ€§åˆ« | PUT | /api/user/profile/gender |
| æ›´æ–°ç”Ÿæ—¥ | PUT | /api/user/profile/birthday |
| æ›´æ–°å±…ä½åœ° | PUT | /api/user/profile/residence |
| æ›´æ–°èº«é«˜ | PUT | /api/user/profile/height |
| æ›´æ–°ä½“é‡ | PUT | /api/user/profile/weight |
| æ›´æ–°èŒä¸š | PUT | /api/user/profile/occupation |
| æ›´æ–°å¾®ä¿¡å· | PUT | /api/user/profile/wechat |
| æ›´æ–°ä¸ªæ€§ç­¾å | PUT | /api/user/profile/bio |

### æŠ€èƒ½ç®¡ç†ç±»

| æ¥å£ | æ–¹æ³• | è·¯å¾„ |
|------|------|------|
| è·å–æŠ€èƒ½é…ç½® | GET | /api/skills/config |
| è·å–æˆ‘çš„æŠ€èƒ½ | GET | /api/user/skills/my |
| åˆ›å»ºçº¿ä¸ŠæŠ€èƒ½ | POST | /api/user/skills/online |
| åˆ›å»ºçº¿ä¸‹æŠ€èƒ½ | POST | /api/user/skills/offline |
| ä¸Šä¼ æŠ€èƒ½å›¾ç‰‡ | POST | /api/skills/images/upload |
| è·å–æŠ€èƒ½è¯¦æƒ… | GET | /api/user/skills/{skillId} |
| æ›´æ–°çº¿ä¸ŠæŠ€èƒ½ | PUT | /api/user/skills/online/{skillId} |
| æ›´æ–°çº¿ä¸‹æŠ€èƒ½ | PUT | /api/user/skills/offline/{skillId} |
| åˆ é™¤æŠ€èƒ½ | DELETE | /api/user/skills/{skillId} |
| åˆ‡æ¢ä¸Šä¸‹æ¶ | PUT | /api/user/skills/{skillId}/toggle |

### å…³ç³»ç®¡ç†ç±»

| æ¥å£ | æ–¹æ³• | è·¯å¾„ |
|------|------|------|
| è·å–ç²‰ä¸åˆ—è¡¨ | GET | /api/user/relation/fans |
| è·å–å…³æ³¨åˆ—è¡¨ | GET | /api/user/relation/following |
| å…³æ³¨ç”¨æˆ· | POST | /api/user/relation/follow/{userId} |
| å–æ¶ˆå…³æ³¨ | DELETE | /api/user/relation/follow/{userId} |
| ä¸¾æŠ¥ç”¨æˆ· | POST | /api/user/relation/report |
| æ‹‰é»‘ç”¨æˆ· | POST | /api/user/relation/block |

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-11-14
**æœ‰æ•ˆæœŸ**: è‡³ç”Ÿäº§ä¸Šçº¿

ğŸ‰ **ç¥å‰ç«¯å¼€å‘é¡ºåˆ©ï¼æœ‰ä»»ä½•é—®é¢˜éšæ—¶è”ç³»åç«¯å›¢é˜Ÿï¼**
