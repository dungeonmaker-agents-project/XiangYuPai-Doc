# 12-服务详情页面

## 一、页面概述

### 页面信息
- **路由路径**: `/service/detail`
- **页面名称**: 服务详情
- **用户角色**: 所有用户
- **页面类型**: 详情页面

### 页面功能
服务详情页面展示服务提供者的完整信息。用户可以:
1. 查看服务提供者的详细信息
2. 查看技能信息和段位
3. 查看评价和评分
4. 查看全部评价
5. 下单购买服务

### 进入方式
- 从服务列表点击服务提供者卡片

---

## 二、页面UI结构

### 2.1 顶部导航栏
```
[返回] | 详情 |
```

### 2.2 封面区
```
[服务封面图/游戏截图]
```

### 2.3 服务者信息区
```
[头像]  昵称 ♂ 在线
        [实名认证] [大神]
        微信区 荣耀王者 巅峰1800+
```

### 2.4 价格区
```
10 金币/局
```

### 2.5 描述区
```
服务描述文字...
```

### 2.6 评价区
```
评价 (100+) ⭐⭐⭐⭐⭐
[声音好听] [技术好]

[头像] 昵称 ⭐⭐⭐⭐⭐
评价内容...
2025-06-06

查看全部评价 >
```

### 2.7 底部操作栏
```
[☐ 贴贴]          [☐ 下单]
```

---

## 三、接口列表

### 3.1 页面加载时调用

#### 1. 获取服务详情
**接口:** `GET /api/service/detail`

**请求参数:**
```typescript
{
  serviceId: number;
  userId?: number;
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    serviceId: number;
    provider: {
      userId: number;
      avatar: string;
      nickname: string;
      gender: 'male' | 'female';
      age?: number;
      isOnline: boolean;
      isVerified: boolean;
      level?: number;
    };
    bannerImage?: string;
    images?: string[];
    skillInfo: {
      skillType: string;
      skillLabel: string;
      gameArea?: string;
      rank?: string;
      rankScore?: number;
      rankDisplay?: string;
      position?: string[];
      voiceType?: string;
    };
    tags: Array<{text: string; type: string; color?: string}>;
    description: string;
    price: {amount: number; unit: string; displayText: string};
    schedule?: {available: string};
    location?: {address: string; district?: string; distance?: number};
    stats: {orders: number; rating: number; reviewCount: number};
    reviews: {
      total: number;
      summary: {excellent: number; positive: number; negative: number};
      tags: Array<{text: string; count: number}>;
      recent: Array<{
        reviewId: number;
        reviewer: {userId: number; avatar: string; nickname: string};
        rating: number;
        content: string;
        images?: string[];
        createdAt: string;
        reply?: string;
      }>;
    };
    availability: {isAvailable: boolean; reason?: string};
  }
}
```

---

### 3.2 用户操作触发

#### 2. 查看全部评价
**接口:** `GET /api/service/reviews`

**请求参数:**
```typescript
{
  serviceId: number;
  pageNum: number;
  pageSize: number;
  filterBy?: 'all' | 'excellent' | 'positive' | 'negative';
}
```

---

## 四、数据流

### 4.1 页面打开流程
```
1. 从列表页点击服务卡片
2. 调用GET /api/service/detail
3. 显示Loading骨架屏
4. 收到响应 → 渲染服务详情
```

### 4.2 下单流程
```
1. 用户点击"下单"按钮
2. 跳转到确认订单页面
3. 传递serviceId
```

---

## 五、路由参数

### 进入参数
```typescript
{
  serviceId: number;  // 服务ID(必填)
}
```

### 跳转目标

#### 点击下单按钮
```typescript
this.$router.push({
  path: '/order/preview',
  query: { serviceId: service.serviceId }
});
```

#### 点击查看全部评价
```typescript
this.$router.push({
  path: '/service/reviews',
  query: { serviceId: service.serviceId }
});
```

---

## 六、使用的后端服务

### ServiceService
- `GET /api/service/detail` - 获取服务详情
- `GET /api/service/reviews` - 获取全部评价

---

**文档版本**: v1.0
**最后更新**: 2025-01-XX
**维护者**: 前端团队
