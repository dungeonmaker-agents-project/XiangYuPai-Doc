# 09-ç»„å±€è¯¦æƒ…é¡µé¢

## ä¸€ã€é¡µé¢æ¦‚è¿°

### é¡µé¢ä¿¡æ¯
- **è·¯ç”±è·¯å¾„**: `/activity/detail`
- **é¡µé¢åç§°**: ç»„å±€è¯¦æƒ…
- **ç”¨æˆ·è§’è‰²**: æ‰€æœ‰ç”¨æˆ·
- **é¡µé¢ç±»å‹**: è¯¦æƒ…é¡µé¢

### é¡µé¢åŠŸèƒ½
ç»„å±€è¯¦æƒ…é¡µé¢å±•ç¤ºæ´»åŠ¨çš„å®Œæ•´ä¿¡æ¯ã€‚ç”¨æˆ·å¯ä»¥:
1. æŸ¥çœ‹æ´»åŠ¨è¯¦ç»†ä¿¡æ¯
2. æŸ¥çœ‹ç»„ç»‡è€…ä¿¡æ¯
3. æŸ¥çœ‹å·²æŠ¥åç”¨æˆ·åˆ—è¡¨
4. æŠ¥åå‚åŠ æ´»åŠ¨
5. å–æ¶ˆæŠ¥å(å¦‚å·²æŠ¥å)
6. å®¡æ ¸æŠ¥å(ç»„ç»‡è€…)

### è¿›å…¥æ–¹å¼
- ä»ç»„å±€ä¸­å¿ƒåˆ—è¡¨ç‚¹å‡»æ´»åŠ¨å¡ç‰‡

---

## äºŒã€é¡µé¢UIç»“æ„

### 2.1 é¡¶éƒ¨å¯¼èˆªæ 
```
[è¿”å›] | è¯¦æƒ… |
```

### 2.2 å°é¢åŒº
```
[æ´»åŠ¨å°é¢å›¾/Banner]
```

### 2.3 ç»„ç»‡è€…ä¿¡æ¯åŒº
```
[å¤´åƒ]  ç»„ç»‡è€…æ˜µç§°
        [è®¤è¯æ ‡ç­¾]
```

### 2.4 æ´»åŠ¨è¯¦æƒ…åŒº
```
æ´»åŠ¨æè¿°æ–‡å­—...

â° 6æœˆ09æ—¥08:00
ğŸ“ åœ°å€...
ğŸ’° 30é‡‘å¸/äºº/å°æ—¶
ğŸ‘¥ 2äºº
```

### 2.5 å‚ä¸è€…åŒº
```
ç­‰0åäººæŠ¥å...
[å¤´åƒ1] [å¤´åƒ2] [å¤´åƒ3]
```

### 2.6 åº•éƒ¨æ“ä½œæ 
```
[â˜ è´´è´´]          [â˜ æŠ¥å]
```

**æŒ‰é’®çŠ¶æ€:**
- æœªæŠ¥å: "â˜ æŠ¥å"(ç´«è‰²)
- å®¡æ ¸ä¸­: "ç­‰å¾…å®¡æ ¸"(ç°è‰²)
- æŠ¥åæˆåŠŸ: "æŠ¥åæˆåŠŸ"(ç´«è‰²)
- å·²æ»¡å‘˜: "å·²æ»¡å‘˜"(ç°è‰²,ä¸å¯ç‚¹å‡»)

---

## ä¸‰ã€æ¥å£åˆ—è¡¨

### 3.1 é¡µé¢åŠ è½½æ—¶è°ƒç”¨

#### 1. è·å–æ´»åŠ¨è¯¦æƒ…
**æ¥å£:** `GET /api/activity/detail`

**è¯·æ±‚å‚æ•°:**
```typescript
{
  activityId: number;
}
```

**å“åº”æ•°æ®:**
```typescript
{
  code: number;
  message: string;
  data: {
    activityId: number;
    status: 'open' | 'full' | 'closed' | 'cancelled';
    organizer: {
      userId: number;
      avatar: string;
      nickname: string;
      tags?: string[];
      isVerified: boolean;
    };
    activityType: {type: string; label: string; icon: string};
    title?: string;
    description: string;
    images?: string[];
    bannerImage?: string;
    schedule: {startTime: string; endTime?: string; displayText: string};
    location: {address: string; district?: string};
    price: {amount: number; unit: string; displayText: string};
    participants: {
      registered: number;
      limit: number;
      displayText: string;
      list: Array<{
        userId: number;
        avatar: string;
        nickname: string;
        status: 'pending' | 'approved' | 'rejected';
        statusLabel: string;
      }>;
      waitingText?: string;
    };
    registrationDeadline: string;
    userStatus?: {
      isOrganizer: boolean;
      hasRegistered: boolean;
      registrationStatus?: 'pending' | 'approved' | 'rejected';
      canRegister: boolean;
    };
  }
}
```

---

### 3.2 ç”¨æˆ·æ“ä½œè§¦å‘

#### 2. æŠ¥åå‚åŠ æ´»åŠ¨
**æ¥å£:** `POST /api/activity/register`

**è¯·æ±‚å‚æ•°:**
```typescript
{
  activityId: number;
  message?: string;
}
```

**å“åº”æ•°æ®:**
```typescript
{
  code: number;
  message: string;
  data: {
    registrationId: number;
    status: 'pending' | 'approved';
    needPayment: boolean;
    paymentInfo?: {amount: number; description: string};
    approvalRequired: boolean;
  }
}
```

---

#### 3. å–æ¶ˆæŠ¥å
**æ¥å£:** `POST /api/activity/register/cancel`

**è¯·æ±‚å‚æ•°:**
```typescript
{
  activityId: number;
  registrationId: number;
}
```

---

## å››ã€æ•°æ®æµ

### 4.1 é¡µé¢æ‰“å¼€æµç¨‹
```
1. ä»åˆ—è¡¨é¡µç‚¹å‡»æ´»åŠ¨å¡ç‰‡
2. è°ƒç”¨GET /api/activity/detail
3. æ˜¾ç¤ºLoadingéª¨æ¶å±
4. æ”¶åˆ°å“åº” â†’ æ¸²æŸ“æ´»åŠ¨è¯¦æƒ…
5. æ ¹æ®userStatusæ˜¾ç¤ºå¯¹åº”æŒ‰é’®çŠ¶æ€
```

### 4.2 æŠ¥åæµç¨‹
```
1. ç”¨æˆ·ç‚¹å‡»"æŠ¥å"æŒ‰é’®
2. è°ƒç”¨POST /api/activity/register
3. å¦‚æœneedPayment=true â†’ æ˜¾ç¤ºæ”¯ä»˜å¼¹çª—
4. å¦‚æœapprovalRequired=true â†’ æ˜¾ç¤º"ç­‰å¾…å®¡æ ¸"
5. å¦åˆ™ â†’ æ˜¾ç¤º"æŠ¥åæˆåŠŸ"
6. åˆ·æ–°æ´»åŠ¨è¯¦æƒ…
```

---

## äº”ã€è·¯ç”±å‚æ•°

### è¿›å…¥å‚æ•°
```typescript
{
  activityId: number;  // æ´»åŠ¨ID(å¿…å¡«)
}
```

---

## å…­ã€ä½¿ç”¨çš„åç«¯æœåŠ¡

### ActivityService
- `GET /api/activity/detail` - è·å–æ´»åŠ¨è¯¦æƒ…
- `POST /api/activity/register` - æŠ¥åå‚åŠ 
- `POST /api/activity/register/cancel` - å–æ¶ˆæŠ¥å

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-01-XX
**ç»´æŠ¤è€…**: å‰ç«¯å›¢é˜Ÿ
