# 发布动态页面

## 概述

发布动态页面是用户创建和分享内容的核心入口,支持文字、图片、视频、话题和地点等多种内容形式。用户可以通过此页面发布动态、活动、技能等内容,丰富社区生态。

**主要功能:**
- 标题和正文输入(标题可选,正文必填)
- 图片上传(最多9张,自动压缩)
- 视频上传(最多1个)
- 话题选择(最多5个)
- 地点选择(可选)
- 可见范围设置(公开/仅好友/仅自己)

**前置条件:**
- 必须登录才能发布内容
- 图片/视频需要先上传到媒体服务(MediaService)
- 话题需要从话题服务查询
- 地点需要从位置服务查询

---

## 页面结构

### 顶部导航栏

**布局:**
```
┌─────────────────────────────────────┐
│ 取消              动态               │
└─────────────────────────────────────┘
```

**组件:**
- 取消按钮(左侧)
- 标题文字(中间,显示内容类型: 动态/活动/技能)

**样式:**
- 高度: 56px
- 背景: 白色
- 底部分割线: 1px浅灰色

### 内容编辑区

**标题输入区:**
```
┌─────────────────────────────────────┐
│ 添加标题                             │
└─────────────────────────────────────┘
```

**样式:**
- 占位符: "添加标题"
- 字体: 18pt,加粗
- 最大长度: 50字符
- 单行输入

**正文输入区:**
```
┌─────────────────────────────────────┐
│ 添加正文                             │
│                                     │
│                                     │
│                                     │
│                             0/1000  │
└─────────────────────────────────────┘
```

**样式:**
- 占位符: "添加正文"
- 字体: 16pt,常规
- 最大长度: 1000字符
- 多行输入,自动扩展
- 最小高度: 200px
- 字符计数: 右下角显示

**媒体区域:**
```
┌─────────────────────────────────────┐
│ [图片1] [图片2] [+]                  │
│ [图片4] [图片5] [图片6]              │
└─────────────────────────────────────┘
```

**布局:**
- 网格布局: 3列
- 缩略图尺寸: 110x110px
- 间距: 8px
- 圆角: 8px
- 删除按钮: 右上角X图标

**话题选择区:**
```
┌─────────────────────────────────────┐
│ # 选择话题      # S10全球总决赛 ×    →│
└─────────────────────────────────────┘
```

**布局:**
- 高度: 56px
- 左侧: # 图标 + "选择话题"文字
- 右侧: 已选话题标签 + 箭头
- 可点击跳转话题选择页

**地点选择区:**
```
┌─────────────────────────────────────┐
│ 📍 选择地点          深圳市南山区    →│
└─────────────────────────────────────┘
```

**布局:**
- 高度: 56px
- 左侧: 📍 图标 + "选择地点"文字
- 右侧: 已选地点名称 + 箭头
- 可点击跳转地点选择页

### 底部发布按钮

```
┌─────────────────────────────────────┐
│              发布                    │
└─────────────────────────────────────┘
```

**样式:**
- 宽度: 100% (左右边距24px)
- 高度: 52px
- 圆角: 26px
- 字体: 18pt,中等加粗
- 固定在底部(距底部安全区域24px)

**按钮状态:**
1. **启用状态:**
   - 背景: 紫色到蓝色渐变(#b794f6 → #a5b4fc)
   - 文字颜色: 白色

2. **禁用状态:**
   - 背景: 浅灰色 (#E0E0E0)
   - 文字颜色: 灰色 (#999)
   - 不可点击

3. **加载状态:**
   - 背景: 渐变色
   - 文字: "发布中..."
   - 显示加载动画
   - 不可点击

---

## 接口列表

### 1. 发布动态

**接口:** `POST /api/v1/content/publish`

**请求参数:**
```typescript
{
  // 基本信息
  type: number;              // 内容类型: 1=动态, 2=活动, 3=技能
  title?: string;            // 标题,可选,0-50字符
  content: string;           // 正文内容,必填,1-1000字符

  // 媒体资源
  mediaIds: string[];        // 媒体ID数组(图片/视频已上传后的ID)
                            // 图片: 最多9张
                            // 视频: 最多1个
                            // 不能同时上传图片和视频

  // 话题标签
  topicNames: string[];      // 话题名称数组,最多5个
                            // 每个话题名称1-20字符

  // 地理位置
  locationId?: string;       // 地点ID(从地点选择接口获取)
  locationName?: string;     // 地点名称
  locationAddress?: string;  // 详细地址
  longitude?: number;        // 经度
  latitude?: number;         // 纬度

  // 权限设置
  visibility?: number;       // 可见范围: 0=公开, 1=仅好友, 2=仅自己
                            // 默认: 0(公开)
}
```

**触发时机:**
- 用户点击发布按钮

**后端服务:** ContentService (xypai-content)

---

### 2. 上传图片

**接口:** `POST /api/v1/media/upload`

**请求参数:**
```typescript
// FormData
{
  file: File;           // 图片文件
  type: 'image';        // 固定值: image
  quality?: number;     // 压缩质量,默认0.8
  maxWidth?: number;    // 最大宽度,默认1920px
  maxHeight?: number;   // 最大高度,默认1920px
}
```

**触发时机:**
- 用户选择图片后自动上传

**后端服务:** MediaUploadService (在06-common模块, RPC调用)

**验证规则:**
- 格式: jpg/jpeg/png/webp/heic
- 大小: ≤10MB
- 数量: 最多9张
- 自动压缩: >2MB时压缩到0.8质量

---

### 3. 上传视频

**接口:** `POST /api/v1/media/upload`

**请求参数:**
```typescript
// FormData
{
  file: File;           // 视频文件
  type: 'video';        // 固定值: video
}
```

**触发时机:**
- 用户选择视频后自动上传

**后端服务:** MediaUploadService (在06-common模块, RPC调用)

**验证规则:**
- 格式: mp4/mov/avi/flv
- 大小: ≤100MB
- 时长: 1-300秒(5分钟)
- 数量: 最多1个
- 限制: 不能同时上传图片和视频

---

### 4. 获取热门话题

**接口:** `GET /api/v1/content/topics/hot`

**查询参数:**
```typescript
{
  page: number;        // 页码,从1开始
  pageSize: number;    // 每页数量,默认20
}
```

**触发时机:**
- 进入话题选择页面

**后端服务:** ContentService (xypai-content)

---

### 5. 搜索话题

**接口:** `GET /api/v1/content/topics/search`

**查询参数:**
```typescript
{
  keyword: string;     // 搜索关键词,1-20字符
  page: number;        // 页码
  pageSize: number;    // 每页数量
}
```

**触发时机:**
- 用户在话题选择页输入搜索关键词(防抖300ms)

**后端服务:** ContentService (xypai-content)

---

### 6. 获取附近地点

**接口:** `GET /api/v1/location/nearby`

**查询参数:**
```typescript
{
  latitude: number;    // 当前纬度,必填
  longitude: number;   // 当前经度,必填
  radius?: number;     // 搜索半径(km),默认5km
  page: number;        // 页码
  pageSize: number;    // 每页数量
}
```

**触发时机:**
- 进入地点选择页面

**后端服务:** LocationService (在06-common模块, RPC调用)

---

### 7. 搜索地点

**接口:** `GET /api/v1/location/search`

**查询参数:**
```typescript
{
  keyword: string;     // 搜索关键词,1-50字符
  latitude?: number;   // 当前纬度(可选,用于距离计算)
  longitude?: number;  // 当前经度(可选)
  page: number;        // 页码
  pageSize: number;    // 每页数量
}
```

**触发时机:**
- 用户在地点选择页输入搜索关键词(防抖300ms)

**后端服务:** LocationService (在06-common模块, RPC调用)

---

## 数据流

### 发布流程

```
1. 用户点击发布按钮
   ↓
2. 前端验证
   - 检查登录状态
   - 验证正文不为空(1-1000字符)
   - 验证标题长度(0-50字符)
   - 验证媒体上传完成
   - 验证话题数量(≤5个)
   ↓
3. 验证通过
   - 按钮显示加载状态("发布中...")
   - 禁用所有输入
   ↓
4. 调用发布接口
   POST /api/v1/content/publish
   {
     type: 1,
     title: "标题",
     content: "正文内容",
     mediaIds: ["media_id_1", "media_id_2"],
     topicNames: ["话题1", "话题2"],
     locationId: "location_id",
     locationName: "地点名称",
     visibility: 0
   }
   ↓
5. ContentService处理
   - 验证用户登录状态
   - 验证内容格式
   - 创建动态记录
   - 关联媒体资源
   - 关联话题标签
   - 关联地理位置
   ↓
6. 返回结果
   成功: {
     code: 200,
     message: "发布成功",
     data: {
       feedId: "xxx",
       createdAt: 1234567890
     }
   }
   ↓
7. 前端处理响应
   成功:
   - 显示"发布成功"Toast
   - 延迟200ms后:
     * 关闭发布页面
     * 返回发现主页
     * 新动态插入列表顶部(可选)

   失败:
   - 恢复按钮状态
   - 启用所有输入
   - 显示错误提示:
     * 400: "内容格式不正确,请检查"
     * 413: "内容过大,请减少媒体文件"
     * 500: "发布失败,请稍后重试"
   - 保留已输入内容
```

### 图片上传流程

```
1. 用户点击"+"添加图片
   ↓
2. 检查已选图片数量
   - 已达到9张: 提示"最多只能上传9张图片"
   - 未达到限制: 打开图片选择器
   ↓
3. 用户选择图片
   - 支持多选
   - 支持相机拍照
   ↓
4. 前端验证
   - 格式验证(jpg/jpeg/png/webp/heic)
   - 大小验证(≤10MB)
   ↓
5. 验证通过
   - 显示缩略图预览
   - 显示上传进度(0%)
   ↓
6. 图片压缩(前端处理)
   - 大于2MB: 压缩到0.8质量
   - 限制最大尺寸1920x1920px
   ↓
7. 调用上传接口(RPC)
   POST /api/v1/media/upload
   FormData: {
     file: <compressed_image>,
     type: 'image',
     quality: 0.8
   }
   ↓
8. MediaUploadService处理
   - 接收文件
   - 存储到对象存储(OSS/S3)
   - 生成缩略图
   - 返回媒体ID和URL
   ↓
9. 返回结果
   成功: {
     code: 200,
     data: {
       mediaId: "media_xxx",
       url: "https://cdn.example.com/xxx.jpg",
       thumbnailUrl: "https://cdn.example.com/xxx_thumb.jpg",
       width: 1920,
       height: 1080
     }
   }
   ↓
10. 前端处理
   - 更新上传进度(100%)
   - 保存mediaId到数组
   - 显示上传成功的缩略图
   - 移除上传进度条
```

### 话题选择流程

```
1. 用户点击"选择话题"
   ↓
2. 进入话题选择页面(全屏)
   ↓
3. 调用热门话题接口
   GET /api/v1/content/topics/hot?page=1&pageSize=20
   ↓
4. ContentService处理
   - 查询热门话题列表
   - 返回话题数据
   ↓
5. 显示热门话题列表
   - Tab切换(推荐/主要数据/关联数据等)
   - 支持搜索(防抖300ms)
   ↓
6. 用户搜索话题(可选)
   输入关键词 → 防抖300ms →
   GET /api/v1/content/topics/search?keyword=xxx
   ↓
7. 用户选择话题
   - 点击话题卡片 → 选中(紫色边框)
   - 最多5个,超过时提示"最多只能选择5个话题"
   - 再次点击取消选中
   ↓
8. 点击"完成"
   - 返回发布页面
   - 显示已选话题标签(可删除)
```

### 地点选择流程

```
1. 用户点击"选择地点"
   ↓
2. 进入地点选择页面(全屏)
   ↓
3. 请求位置权限
   - 未授权: 显示引导授权提示
   - 已授权: 获取当前位置
   ↓
4. 调用附近地点接口(RPC)
   GET /api/v1/location/nearby?latitude=x&longitude=y&radius=5
   ↓
5. LocationService处理
   - 查询附近地点
   - 计算距离
   - 返回地点列表
   ↓
6. 显示附近地点列表
   - 显示当前定位
   - 支持搜索
   ↓
7. 用户搜索地点(可选)
   输入关键词 → 防抖300ms →
   GET /api/v1/location/search?keyword=xxx
   ↓
8. 用户选择地点
   - 点击某个地点 → 保存地点信息
   - 自动返回发布页面
   - 显示已选地点(可删除)
```

---

## 状态管理

### 页面状态定义

```typescript
interface PublishPageState {
  // 内容数据
  title: string;           // 标题
  content: string;         // 正文
  mediaList: Media[];      // 媒体列表
  topics: string[];        // 已选话题
  location: Location | null; // 已选地点

  // UI状态
  isPublishing: boolean;   // 是否正在发布
  uploadingCount: number;  // 正在上传的媒体数量

  // 草稿
  hasDraft: boolean;       // 是否有草稿
  draftTime: number;       // 草稿保存时间
}

interface Media {
  id: string;              // 本地ID
  type: 'image' | 'video'; // 媒体类型
  file: File;              // 原始文件
  url: string;             // 本地预览URL
  mediaId?: string;        // 上传后的服务器ID
  status: 'pending' | 'uploading' | 'success' | 'failed'; // 上传状态
  progress: number;        // 上传进度(0-100)
  thumbnailUrl?: string;   // 缩略图URL
}

interface Location {
  id: string;
  name: string;
  address: string;
  longitude: number;
  latitude: number;
  distance?: number;
}
```

### 初始状态

```typescript
const initialState: PublishPageState = {
  title: '',
  content: '',
  mediaList: [],
  topics: [],
  location: null,

  isPublishing: false,
  uploadingCount: 0,

  hasDraft: false,
  draftTime: 0,
};
```

### 状态更新

**添加图片:**
```typescript
const handleAddImages = async (files: File[]) => {
  // 验证数量
  if (state.mediaList.length + files.length > 9) {
    showToast('最多只能上传9张图片');
    return;
  }

  // 创建Media对象
  const newMediaList = files.map(file => ({
    id: generateId(),
    type: 'image' as const,
    file,
    url: URL.createObjectURL(file),
    status: 'pending' as const,
    progress: 0
  }));

  // 更新状态
  setState({
    ...state,
    mediaList: [...state.mediaList, ...newMediaList]
  });

  // 开始上传
  newMediaList.forEach(media => {
    uploadMedia(media);
  });
};
```

**上传媒体:**
```typescript
const uploadMedia = async (media: Media) => {
  // 更新状态为上传中
  updateMediaStatus(media.id, { status: 'uploading', progress: 0 });
  setState({ ...state, uploadingCount: state.uploadingCount + 1 });

  try {
    // 压缩图片(如果需要)
    const compressedFile = media.type === 'image' && media.file.size > 2 * 1024 * 1024
      ? await compressImage(media.file)
      : media.file;

    // 调用上传接口
    const response = await uploadMediaFile(compressedFile, media.type, (progress) => {
      updateMediaStatus(media.id, { progress });
    });

    if (response.code === 200) {
      // 上传成功
      updateMediaStatus(media.id, {
        status: 'success',
        progress: 100,
        mediaId: response.data.mediaId,
        thumbnailUrl: response.data.thumbnailUrl
      });
    } else {
      // 上传失败
      updateMediaStatus(media.id, { status: 'failed' });
      showToast('上传失败,请重试');
    }
  } catch (error) {
    updateMediaStatus(media.id, { status: 'failed' });
    showToast('上传失败,请重试');
  } finally {
    setState({ ...state, uploadingCount: state.uploadingCount - 1 });
  }
};
```

**发布验证:**
```typescript
const canPublish = () => {
  // 正文必填
  if (!state.content || state.content.trim().length === 0) {
    return { valid: false, error: '请输入正文内容' };
  }

  // 正文长度
  if (state.content.length > 1000) {
    return { valid: false, error: '正文内容不能超过1000字符' };
  }

  // 标题长度
  if (state.title && state.title.length > 50) {
    return { valid: false, error: '标题不能超过50字符' };
  }

  // 媒体上传完成
  if (state.uploadingCount > 0) {
    return { valid: false, error: '请等待媒体上传完成' };
  }

  // 媒体上传失败
  const failedMedia = state.mediaList.filter(m => m.status === 'failed');
  if (failedMedia.length > 0) {
    return { valid: false, error: '有媒体上传失败,请重新上传' };
  }

  return { valid: true };
};
```

---

## 前端验证

### 内容验证

```typescript
const validateContent = (title: string, content: string) => {
  // 正文必填
  if (!content || content.trim().length === 0) {
    return { valid: false, error: '请输入正文内容' };
  }

  // 正文长度
  if (content.length > 1000) {
    return { valid: false, error: '正文内容不能超过1000字符' };
  }

  // 标题长度(如果填写)
  if (title && title.length > 50) {
    return { valid: false, error: '标题不能超过50字符' };
  }

  return { valid: true };
};
```

### 媒体验证

```typescript
const validateMedia = (mediaList: Media[]) => {
  const images = mediaList.filter(m => m.type === 'image');
  const videos = mediaList.filter(m => m.type === 'video');

  // 图片和视频不能同时存在
  if (images.length > 0 && videos.length > 0) {
    return { valid: false, error: '图片和视频不能同时上传' };
  }

  // 图片数量
  if (images.length > 9) {
    return { valid: false, error: '最多只能上传9张图片' };
  }

  // 视频数量
  if (videos.length > 1) {
    return { valid: false, error: '最多只能上传1个视频' };
  }

  // 检查是否有上传中或失败的媒体
  const uploading = mediaList.filter(m => m.status === 'uploading');
  const failed = mediaList.filter(m => m.status === 'failed');

  if (uploading.length > 0) {
    return { valid: false, error: '请等待媒体上传完成' };
  }

  if (failed.length > 0) {
    return { valid: false, error: '有媒体上传失败,请重新上传' };
  }

  return { valid: true };
};
```

### 话题验证

```typescript
const validateTopics = (topics: string[]) => {
  // 话题数量
  if (topics.length > 5) {
    return { valid: false, error: '最多只能选择5个话题' };
  }

  // 话题名称长度
  for (const topic of topics) {
    if (topic.length > 20) {
      return { valid: false, error: '话题名称不能超过20字符' };
    }
  }

  return { valid: true };
};
```

---

## 交互行为

### 1. 进入发布页面

**触发:** 从发现主页点击发布按钮

**行为:**
1. 检查登录状态
2. 未登录: 弹出登录提示
3. 已登录:
   - 打开发布页面(全屏)
   - 自动聚焦到正文输入框
   - 弹出键盘
   - 发布按钮初始为禁用状态

---

### 2. 输入内容

**标题输入:**
- 占位符: "添加标题"
- 单行输入
- 实时字符计数: "0/50"
- 达到50字符时禁止继续输入

**正文输入:**
- 占位符: "添加正文"
- 多行输入,自动扩展
- 实时字符计数: "0/1000"
- 达到1000字符时禁止继续输入
- 有内容时启用发布按钮

---

### 3. 添加图片

**点击"+"按钮:**
1. 检查已选图片数量
2. 已达到9张: 提示"最多只能上传9张图片"
3. 未达到限制:
   - 打开图片选择器
   - 支持多选
   - 支持相机拍照

**选择图片后:**
1. 验证格式和大小
2. 显示缩略图预览
3. 开始上传
4. 显示上传进度
5. 上传成功后保存mediaId

**删除图片:**
1. 点击缩略图右上角X
2. 从列表移除
3. 如果少于9张,重新显示"+"按钮

---

### 4. 添加视频

**点击"+"选择视频:**
1. 检查是否已选图片
2. 已选图片: 提示"视频和图片不能同时上传"
3. 未选图片:
   - 打开视频选择器
   - 选择视频

**选择视频后:**
1. 验证格式、大小、时长
2. 生成封面(第1帧)
3. 显示封面缩略图
4. 开始上传
5. 显示上传进度
6. 上传成功后保存mediaId

---

### 5. 选择话题

**点击"选择话题":**
1. 进入话题选择页面
2. 显示热门话题列表
3. 支持搜索话题

**选择话题:**
1. 点击话题卡片
2. 检查已选数量
3. 未达到5个: 选中话题
4. 已达到5个: 提示"最多只能选择5个话题"

**完成选择:**
1. 点击"完成"按钮
2. 返回发布页面
3. 显示已选话题标签

**删除话题:**
1. 点击标签右侧X
2. 从已选列表移除

---

### 6. 选择地点

**点击"选择地点":**
1. 进入地点选择页面
2. 请求位置权限
3. 显示当前定位和附近地点

**自动定位:**
1. 点击"自动定位"按钮
2. 获取当前位置
3. 更新地图中心
4. 刷新附近地点列表

**选择地点:**
1. 点击某个地点项
2. 保存地点信息
3. 自动返回发布页面
4. 显示已选地点

**删除地点:**
1. 点击地点右侧X或箭头
2. 清除已选地点

---

### 7. 发布动态

**点击"发布"按钮:**
1. 验证所有字段
2. 验证通过:
   - 按钮进入加载状态
   - 禁用所有输入
   - 调用发布接口
3. 成功后:
   - 显示"发布成功"Toast
   - 返回发现主页
   - 新动态显示在列表顶部
4. 失败后:
   - 显示错误提示
   - 恢复按钮状态
   - 保留已输入内容

---

### 8. 取消发布

**点击"取消"按钮:**
1. 检查是否有未保存内容
2. 有内容:
   - 弹出确认对话框
   - "确认离开?"
   - "内容尚未发布,是否放弃?"
   - "继续编辑" | "放弃"
3. 点击"放弃":
   - 清空所有内容
   - 返回上一页
4. 无内容: 直接返回

---

## 测试要点

### 功能测试
- [ ] 标题和正文输入正常
- [ ] 字符计数显示正确
- [ ] 图片上传功能正常
- [ ] 视频上传功能正常
- [ ] 图片和视频互斥验证
- [ ] 话题选择功能正常
- [ ] 地点选择功能正常
- [ ] 发布功能正常
- [ ] 取消发布确认正常
- [ ] 草稿保存和恢复(可选)

### 边界测试
- [ ] 标题超长验证
- [ ] 正文超长验证
- [ ] 图片超过9张验证
- [ ] 视频超过1个验证
- [ ] 话题超过5个验证
- [ ] 图片格式验证
- [ ] 图片大小验证
- [ ] 视频格式验证
- [ ] 视频大小验证
- [ ] 视频时长验证
- [ ] 上传中断处理
- [ ] 网络异常处理

### 性能测试
- [ ] 大图上传性能
- [ ] 视频上传性能
- [ ] 并发上传稳定性
- [ ] 内存占用控制
- [ ] 草稿保存性能

---

## 使用的后端服务

### ContentService (xypai-content, port 8003)

**调用的接口:**
1. `POST /api/v1/content/publish` - 发布动态
2. `GET /api/v1/content/topics/hot` - 获取热门话题
3. `GET /api/v1/content/topics/search` - 搜索话题

---

### MediaUploadService (06-common模块, RPC调用)

**调用的接口:**
1. `POST /api/v1/media/upload` - 上传图片/视频

**RPC调用方式:**
```typescript
// ContentService调用MediaUploadService
const mediaResult = await rpcCall('MediaUploadService', 'uploadMedia', {
  file: fileData,
  type: 'image',
  quality: 0.8
});
```

---

### LocationService (06-common模块, RPC调用)

**调用的接口:**
1. `GET /api/v1/location/nearby` - 获取附近地点
2. `GET /api/v1/location/search` - 搜索地点

**RPC调用方式:**
```typescript
// ContentService调用LocationService
const locations = await rpcCall('LocationService', 'getNearbyLocations', {
  latitude: 22.5,
  longitude: 114.0,
  radius: 5
});
```

---

## 相关页面

### 前置页面
1. **发现主页页面** (`01-发现主页页面.md`)
   - 跳转方式: 点击发布按钮
   - 传递参数: 无

### 后续页面
1. **发现主页页面** (`01-发现主页页面.md`)
   - 跳转方式: 发布成功后返回
   - 传递参数: 无

2. **话题选择页面** (子页面,待创建)
   - 跳转方式: 点击"选择话题"
   - 传递参数: 已选话题列表

3. **地点选择页面** (子页面,待创建)
   - 跳转方式: 点击"选择地点"
   - 传递参数: 当前位置

4. **登录页面** (在01-auth模块)
   - 跳转方式: 未登录时进入发布页
   - 传递参数: 无

---

## TypeScript类型定义

```typescript
// 发布请求参数
interface PublishRequest {
  type: number;
  title?: string;
  content: string;
  mediaIds: string[];
  topicNames: string[];
  locationId?: string;
  locationName?: string;
  locationAddress?: string;
  longitude?: number;
  latitude?: number;
  visibility?: number;
}

// 发布响应
interface PublishResponse {
  code: number;
  message: string;
  data: {
    feedId: string;
    createdAt: number;
  } | null;
}

// 媒体上传响应
interface MediaUploadResponse {
  code: number;
  message: string;
  data: {
    mediaId: string;
    url: string;
    thumbnailUrl?: string;
    width: number;
    height: number;
    duration?: number;
  } | null;
}

// 话题数据
interface Topic {
  name: string;
  description?: string;
  participantCount: number;
  postCount: number;
  coverImage?: string;
  isOfficial?: boolean;
  isHot?: boolean;
}

// 地点数据
interface Location {
  id: string;
  name: string;
  address: string;
  longitude: number;
  latitude: number;
  distance?: number;
  category?: string;
}
```
