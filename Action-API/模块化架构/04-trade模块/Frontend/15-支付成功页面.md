# 15-支付成功页面

## 一、页面概述

### 页面信息
- **路由路径**: `/payment/success`
- **页面名称**: 支付成功
- **用户角色**: 登录用户
- **页面类型**: 结果页面

### 页面功能
支付成功页面展示支付结果和订单信息。用户可以:
1. 查看支付成功状态
2. 查看支付金额
3. 查看订单详情
4. 跳转到订单详情页
5. 返回首页

### 进入方式
- 从支付页面支付成功后自动跳转

---

## 二、页面UI结构

### 2.1 顶部导航栏
```
支付成功                    [完成]
```

### 2.2 中央状态区
```
        ✓
    支付成功

    10 金币
```

**UI组件:**
- 绿色对勾图标(圆形背景,约80x80)
- "支付成功"文字(居中)
- 支付金额(大号字体)

### 2.3 订单详情区
```
付款金币      10个
订单编号      25060610042501
提现时间      2025-06-06 10:04:25
```

### 2.4 提示信息
```
注: 10分钟后未接单自动取消
```

---

## 三、接口列表

### 3.1 页面加载时调用(可选)

#### 1. 获取订单详情
**接口:** `GET /api/order/detail`

**调用时机:**
- 页面打开时(可选)

**请求参数:**
```typescript
{
  orderId: string;
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    orderId: string;
    orderNo: string;
    status: 'pending' | 'accepted' | 'in_progress' | 'completed' | 'cancelled';
    amount: number;
    createdAt: string;
    autoCancelTime?: string;
    provider: {userId: number; nickname: string; avatar: string};
    service: {name: string; quantity: number};
  }
}
```

---

## 四、数据流

### 4.1 页面打开流程
```
1. 支付成功后跳转
2. 携带orderId和orderNo参数
3. (可选)调用GET /api/order/detail
4. 显示支付成功信息
5. (可选)3-5秒后自动跳转订单详情
```

---

## 五、状态管理

### 5.1 页面级状态
```typescript
{
  orderId: string;
  orderNo: string;
  amount: number;
  createdAt: string;
  autoJumpCountdown: number;  // 自动跳转倒计时
}
```

---

## 六、路由参数

### 6.1 进入参数
```typescript
{
  orderId: string;      // 订单ID(必填)
  orderNo: string;      // 订单编号(必填)
  amount: number;       // 支付金额(可选)
}
```

### 6.2 跳转目标

#### 点击"完成"按钮
```typescript
this.$router.replace({
  path: '/order/detail',
  query: { orderId: this.orderId }
});
```

#### 自动跳转(可选)
```typescript
setTimeout(() => {
  this.$router.replace({
    path: '/order/detail',
    query: { orderId: this.orderId }
  });
}, 3000);  // 3秒后自动跳转
```

---

## 七、使用的后端服务

### OrderService
- `GET /api/order/detail` - 获取订单详情(可选)

---

## 八、前端实现要点

### 关键逻辑
1. **支付结果展示**: 绿色对勾+成功文字
2. **订单信息**: 显示关键订单信息
3. **自动跳转**: (可选)3-5秒后自动跳转
4. **手动跳转**: 点击"完成"按钮跳转

---

**文档版本**: v1.0
**最后更新**: 2025-01-XX
**维护者**: 前端团队
