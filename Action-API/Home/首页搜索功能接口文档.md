# 首页搜索功能接口文档

## 概述
本文档定义首页搜索功能的所有接口,包括搜索历史、搜索建议、综合搜索结果(全部/用户/下单/话题)以及相关操作的前端参数要求。

---

## 一、打开搜索页面

### 用户操作
1. 用户在首页点击搜索框/搜索图标
2. **系统打开搜索页面** → 触发接口

### 接口定义
**接口:** `GET /api/search/init`

**参数:**
```typescript
{
  // 无参数,从token获取当前用户ID
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    searchHistory: Array<{
      keyword: string;     // 搜索关键词
      searchTime: string;  // 搜索时间(ISO格式)
      type?: string;       // 搜索类型(可选:'user','topic','order')
    }>;
    hotKeywords: Array<{   // 热门搜索(可选)
      keyword: string;
      rank?: number;       // 排名(可选)
      isHot?: boolean;     // 是否标记为热门
    }>;
    placeholder: string;   // 搜索框占位文字(如:"搜索更多")
  }
}
```

### 前端行为
- 显示搜索框(占位符:"搜索更多")
- 显示"历史记录"标题和搜索历史列表
- 历史记录按时间倒序排列(最近的在前)
- 最多显示10条历史记录
- 如果有热门搜索,在历史记录下方显示(可选功能)
- 搜索框自动获取焦点,弹出键盘

---

## 二、获取搜索建议

### 用户操作
1. 用户在搜索框输入文字
2. **系统实时显示搜索建议** → 触发接口

### 接口定义
**接口:** `GET /api/search/suggest`

**参数:**
```typescript
{
  keyword: string;       // 搜索关键词(至少1个字符)
  limit?: number;        // 建议数量(默认10)
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    suggestions: Array<{
      text: string;         // 建议文本
      type: 'user' | 'topic' | 'keyword';  // 类型
      highlight?: string;   // 高亮部分(可选)
      icon?: string;        // 图标(用户头像或话题图标)
      extra?: string;       // 额外信息(如:用户签名,话题热度)
    }>;
  }
}
```

### 前端验证
- keyword长度:1-50字符
- 使用防抖:输入停止300ms后才触发请求

### 前端行为
- 用户输入时实时显示搜索建议
- 建议列表覆盖在搜索框下方
- 点击建议项:填充到搜索框并执行搜索
- 建议文本中的关键词部分高亮显示
- 如果keyword为空:显示历史记录
- 如果keyword不为空:显示搜索建议

---

## 三、执行搜索(综合搜索)

### 用户操作
1. 用户输入搜索关键词
2. 用户点击"搜索"按钮或点击搜索建议
3. **系统执行搜索并显示结果** → 触发接口

### 接口定义
**接口:** `POST /api/search/search`

**参数:**
```typescript
{
  keyword: string;           // 搜索关键词
  type: 'all' | 'user' | 'order' | 'topic';  // 搜索类型(默认'all')
  pageNum: number;           // 页码(从1开始)
  pageSize: number;          // 每页数量(建议10-20)
  filters?: {                // 筛选条件(可选)
    cityCode?: string;       // 城市代码(for order)
    districtCode?: string;   // 区域代码(for order)
    gender?: 'all' | 'male' | 'female';  // 性别(for user/order)
    sortBy?: string;         // 排序方式
  };
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    keyword: string;         // 搜索关键词(回显)
    total: number;           // 总结果数
    hasMore: boolean;        // 是否有更多数据
    tabs: Array<{            // 各Tab的结果统计
      type: 'all' | 'user' | 'order' | 'topic';
      label: string;         // 显示文本(如:"全部","用户","下单","话题")
      count: number;         // 该类型的结果数量
    }>;
    results: {
      // 根据type返回不同结构
      // type='all': 混合内容(posts + videos)
      // type='user': 用户列表
      // type='order': 可下单用户列表
      // type='topic': 话题列表
    };
  }
}
```

### 前端验证
- keyword不能为空
- keyword长度:1-50字符
- pageNum ≥ 1
- pageSize范围:5-30

### 前端行为
- 保存搜索关键词到历史记录
- 显示4个Tab(全部/用户/下单/话题)
- 默认显示"全部"Tab
- 各Tab显示结果数量
- 根据type显示对应的结果列表
- 支持下拉刷新和上拉加载更多
- 无结果时显示:"暂无搜索结果"

---

## 四、搜索结果 - 全部Tab

### 用户操作
1. 执行搜索后默认显示"全部"Tab
2. 或用户点击"全部"Tab
3. **系统加载综合搜索结果** → 触发接口

### 接口定义
**接口:** `GET /api/search/all`

**参数:**
```typescript
{
  keyword: string;
  pageNum: number;
  pageSize: number;
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    total: number;
    hasMore: boolean;
    list: Array<{
      itemType: 'post' | 'video' | 'user';  // 内容类型
      itemId: number;                        // 内容ID
      // 如果是post或video:
      post?: {
        postId: number;
        title?: string;           // 标题(可选)
        description: string;      // 描述(如:"请你们看看")
        thumbnail: string;        // 缩略图URL
        mediaType: 'image' | 'video';
        isVideo: boolean;         // 是否是视频
        author: {
          userId: number;
          avatar: string;
          nickname: string;       // 如:"用户名称"
        };
        stats: {
          likes: number;          // 点赞数(如:88)
          comments?: number;      // 评论数(可选)
          views?: number;         // 浏览数(可选)
        };
      };
      // 如果是user:
      user?: {
        userId: number;
        avatar: string;
        nickname: string;
        signature?: string;       // 个性签名
        isVerified: boolean;      // 是否实名认证
        // ... 其他用户信息
      };
    }>;
  }
}
```

### 前端行为
- 使用瀑布流/网格布局(2列)
- 每个卡片显示:
  - 缩略图(正方形或16:9)
  - 视频有播放图标
  - 底部显示描述文字
  - 用户头像 + 昵称 + 点赞数
- 点击卡片:
  - Post/Video → 跳转内容详情页
  - User → 跳转用户主页
- 支持上拉加载更多

---

## 五、搜索结果 - 用户Tab

### 用户操作
1. 用户点击"用户"Tab
2. **系统加载用户搜索结果** → 触发接口

### 接口定义
**接口:** `GET /api/search/users`

**参数:**
```typescript
{
  keyword: string;
  pageNum: number;
  pageSize: number;
  gender?: 'all' | 'male' | 'female';  // 性别筛选(可选)
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    total: number;
    hasMore: boolean;
    list: Array<{
      userId: number;
      avatar: string;
      nickname: string;        // 如:"王者荣耀112"
      age?: number;            // 年龄(可选,如:19)
      gender: 'male' | 'female';
      signature?: string;      // 个性签名(如:"这里是个性签名")
      isVerified: boolean;     // 是否实名认证
      verifiedLabel?: string;  // 认证标签(如:"实名认证")
      relationStatus: 'none' | 'following' | 'followed' | 'mutual';  // 关注状态
      tags?: string[];         // 用户标签(可选)
      stats?: {
        followers?: number;    // 粉丝数(可选)
        posts?: number;        // 动态数(可选)
      };
    }>;
  }
}
```

### 前端行为
- 垂直列表显示用户
- 每个用户卡片显示:
  - 左侧:圆形头像
  - 右侧:用户信息
    - 第一行:昵称 + 性别图标 + 年龄
    - 第二行:"实名认证"标签(如果isVerified=true)
    - 第三行:个性签名(灰色)
    - 右上角:关注按钮
- 关注按钮状态:
  - 'none' → "关注"按钮(紫色边框)
  - 'following' → "已关注"按钮(灰色边框)
  - 'mutual' → "互相关注"按钮(紫色填充)
  - 'followed' → "关注"按钮(对方关注了你)
- 点击用户卡片:跳转用户主页
- 点击关注按钮:触发关注/取消关注操作

---

## 六、搜索结果 - 下单Tab

### 用户操作
1. 用户点击"下单"Tab
2. **系统加载可下单用户列表** → 触发接口

### 接口定义
**接口:** `GET /api/search/orders`

**参数:**
```typescript
{
  keyword: string;
  pageNum: number;
  pageSize: number;
  filters?: {
    cityCode?: string;       // 城市代码
    districtCode?: string;   // 区域代码
    gender?: 'all' | 'male' | 'female';
    priceRange?: string[];   // 价格范围
    sortBy?: string;         // 排序方式
  };
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    total: number;
    hasMore: boolean;
    list: Array<{
      userId: number;
      avatar: string;
      nickname: string;        // 如:"昵称123"
      gender: 'male' | 'female';
      age?: number;
      distance: number;        // 距离(km,如:3.2)
      tags: Array<{
        text: string;          // 如:"可线上","2元"
        type: 'feature' | 'price' | 'skill';
        color?: string;
      }>;
      description: string;     // 描述文字
      price: {
        amount: number;
        unit: 'per_order' | 'per_hour' | 'per_game';
        displayText: string;   // 如:"10金币/单","200金币/小时"
      };
      isOnline: boolean;       // 是否在线
      skills?: Array<{
        name: string;
        level?: string;
      }>;
      stats?: {
        orders?: number;       // 接单数(可选)
        rating?: number;       // 评分(可选)
      };
    }>;
  }
}
```

### 前端行为
- 垂直列表显示可下单用户
- 用户卡片结构(与限时专享相同):
  - 左侧:正方形头像
  - 右侧:
    - 昵称 + 性别图标 + 距离
    - 标签行(横向滚动)
    - 描述文字(最多2行)
    - 价格(红色加粗,右对齐)
- 点击用户卡片:跳转用户主页(可能直接跳转下单页面)
- 支持上拉加载更多

---

## 七、搜索结果 - 话题Tab

### 用户操作
1. 用户点击"话题"Tab
2. **系统加载话题搜索结果** → 触发接口

### 接口定义
**接口:** `GET /api/search/topics`

**参数:**
```typescript
{
  keyword: string;
  pageNum: number;
  pageSize: number;
  sortBy?: 'relevance' | 'hot' | 'new';  // 排序方式(可选)
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    total: number;
    hasMore: boolean;
    list: Array<{
      topicId: number;
      topicName: string;       // 如:"王者荣耀","王者荣耀排位"
      icon?: string;           // 话题图标URL(游戏logo等)
      description: string;     // 话题描述
      isHot: boolean;          // 是否热门话题
      hotLabel?: string;       // 热门标签文字(如:"热门")
      stats: {
        posts: number;         // 帖子数量
        views?: number;        // 浏览量(可选)
        followers?: number;    // 关注数(可选)
      };
      category?: string;       // 分类(如:"游戏","娱乐")
    }>;
  }
}
```

### 前端行为
- 垂直列表显示话题
- 每个话题卡片显示:
  - 左侧:话题图标(正方形,圆角)
  - 右侧:
    - 第一行:话题名称 + "热门"标签(如果isHot=true)
    - 第二行:话题描述(灰色,最多2行)
- "热门"标签:橙色背景,白色文字
- 点击话题卡片:跳转话题详情页
- 支持上拉加载更多

---

## 八、切换Tab

### 用户操作
1. 用户在搜索结果页点击不同的Tab
2. **系统切换显示对应类型的搜索结果** → 触发接口

### 前端行为
- 点击Tab切换:
  - 更新Tab高亮状态
  - 清空当前列表
  - 重置pageNum=1
  - 调用对应类型的搜索接口
  - 显示加载动画
- Tab状态:
  - 激活Tab:紫色文字 + 底部紫色下划线
  - 未激活Tab:黑色文字
- 各Tab独立维护分页状态

---

## 九、点击搜索历史

### 用户操作
1. 用户在搜索页面点击历史记录中的某个关键词
2. **系统自动填充并执行搜索** → 触发接口

### 前端行为
- 填充关键词到搜索框
- 自动触发搜索(调用"执行搜索"接口)
- 更新历史记录的搜索时间
- 将该关键词移到历史记录首位

---

## 十、清除搜索历史

### 用户操作
1. 用户长按历史记录项或点击删除按钮
2. **系统删除该历史记录** → 触发接口

### 接口定义
**接口:** `DELETE /api/search/history`

**参数:**
```typescript
{
  keyword?: string;    // 要删除的关键词(可选)
  clearAll?: boolean;  // 是否清空所有历史(可选)
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    success: boolean;
  }
}
```

### 前端行为
- 单个删除:
  - 长按历史记录项显示删除确认
  - 确认后调用接口删除
  - 从列表中移除该项
- 清空所有:
  - 显示"清空历史"按钮
  - 点击后显示确认对话框
  - 确认后调用接口(clearAll=true)
  - 清空历史记录列表

---

## 十一、关注/取消关注用户

### 用户操作
1. 用户在用户搜索结果列表中点击关注按钮
2. **系统执行关注/取消关注操作** → 触发接口

### 接口定义
**接口:** `POST /api/user/follow`

**参数:**
```typescript
{
  targetUserId: number;    // 目标用户ID
  action: 'follow' | 'unfollow';  // 操作类型
}
```

**响应数据:**
```typescript
{
  code: number;
  message: string;
  data: {
    success: boolean;
    relationStatus: 'none' | 'following' | 'followed' | 'mutual';
  }
}
```

### 前端验证
- 需要登录状态
- 不能关注自己

### 前端行为
- 点击"关注"按钮:
  - 调用接口(action='follow')
  - 成功后更新按钮状态为"已关注"
  - 如果relationStatus='mutual':更新为"互相关注"
- 点击"已关注"按钮:
  - 显示确认对话框:"确定取消关注?"
  - 确认后调用接口(action='unfollow')
  - 成功后更新按钮状态为"关注"
- 使用防抖,避免重复点击
- 显示操作提示:"已关注" 或 "取消关注成功"

---

## 十二、分页加载

### 用户操作
1. 用户在任一Tab的搜索结果列表中上拉滚动
2. **系统加载下一页数据** → 触发接口

### 前端行为
- 滚动到底部触发加载
- pageNum递增
- 调用对应Tab的搜索接口
- 新数据追加到列表末尾
- 如果hasMore=false:显示"已经到底了~"
- 加载时显示加载动画

---

## 接口汇总

| # | 功能 | 用户操作 | 接口 | 方法 |
|---|------|---------|------|------|
| 1 | 打开搜索页 | 点击搜索框 | `/api/search/init` | GET |
| 2 | 搜索建议 | 输入关键词 | `/api/search/suggest` | GET |
| 3 | 执行搜索 | 点击搜索按钮 | `/api/search/search` | POST |
| 4 | 全部Tab结果 | 点击全部Tab | `/api/search/all` | GET |
| 5 | 用户Tab结果 | 点击用户Tab | `/api/search/users` | GET |
| 6 | 下单Tab结果 | 点击下单Tab | `/api/search/orders` | GET |
| 7 | 话题Tab结果 | 点击话题Tab | `/api/search/topics` | GET |
| 8 | 删除搜索历史 | 长按历史/清空 | `/api/search/history` | DELETE |
| 9 | 关注/取消关注 | 点击关注按钮 | `/api/user/follow` | POST |

---

## 通用验证规则

### 搜索关键词
- 长度:1-50字符
- 不能只包含空格
- 自动去除首尾空格
- 保存到历史记录前需验证合法性

### 搜索历史
- 最多保存50条历史记录
- 按搜索时间倒序排列
- 重复搜索同一关键词:更新时间并移到首位
- 本地缓存30天,过期自动清除

### 搜索结果
- 无结果时显示:"暂无搜索结果,换个关键词试试"
- 各Tab结果独立分页
- 分页参数:pageNum ≥ 1, pageSize 范围:5-30
- 默认pageSize:全部Tab=20, 用户Tab=15, 下单Tab=10, 话题Tab=10

### 关注操作
- 需要登录状态,未登录跳转登录页
- 不能关注自己
- 防抖处理:2秒内不能重复操作

---

## 非接口操作

以下操作不触发接口调用(纯前端交互):

### 搜索页面
- **搜索框获取焦点** - 打开搜索页面时自动获取焦点
- **显示键盘** - 搜索框获取焦点时弹出键盘
- **清空搜索框** - 点击搜索框内的清除按钮
- **显示历史记录** - 搜索框为空时显示历史
- **显示搜索建议** - 搜索框有内容时显示建议

### 搜索结果页面
- **Tab切换动画** - Tab切换时的下划线滑动动画
- **列表滚动** - 结果列表的滚动交互
- **加载动画** - 显示加载中的骨架屏或动画
- **底部提示** - 显示"已经到底了~"
- **高亮关键词** - 搜索结果中关键词的高亮显示

### 点击跳转
- **点击用户卡片** - 跳转用户主页(接口在"用户主页模块"文档中)
- **点击内容卡片** - 跳转内容详情页(接口在"内容详情模块"文档中)
- **点击话题卡片** - 跳转话题详情页(接口在"话题模块"文档中)
- **点击返回** - 返回首页

---

## 数据传递

### 搜索页面 → 搜索结果页面
**执行搜索后传递:**
- keyword(搜索关键词)
- type(搜索类型:'all' | 'user' | 'order' | 'topic')
- 方式:路由参数或状态管理

### 搜索结果页面 → 详情页面
**点击内容卡片传递:**
- postId 或 userId 或 topicId
- from:'search'(来源标识,用于统计)
- keyword(搜索关键词,用于统计)
- 方式:路由参数

### 本地缓存
**需要缓存的数据:**
- 搜索历史 - 缓存30天,最多50条
- 热门搜索 - 缓存1小时
- 搜索结果 - 会话级缓存,退出页面清除
- 当前Tab状态 - 页面级状态,切换页面重置

### 状态同步
**关注操作后需要同步:**
- 用户列表中的关注按钮状态
- 用户主页的关注状态
- 个人中心的关注列表
- 全局用户关系缓存

---

## 异常处理

| 场景 | 前端处理方式 |
|-----|------------|
| 网络错误 | 显示:"网络异常,请稍后重试" + 重试按钮 |
| 服务器错误(500) | 显示:"服务异常,请稍后重试" |
| 接口超时 | 显示:"请求超时,请重试" |
| 搜索关键词为空 | 提示:"请输入搜索关键词" |
| 搜索关键词过长 | 提示:"搜索关键词不能超过50字" |
| 搜索无结果 | 显示:"暂无搜索结果,换个关键词试试" + 搜索建议 |
| 未登录执行关注 | 提示:"请先登录" + 跳转登录页 |
| 关注操作失败 | 提示:"操作失败,请重试" |
| 删除历史失败 | 提示:"删除失败,请重试" |

---

## 搜索页面详细说明

### 页面结构
- **顶部**: 返回按钮 + 搜索框 + "搜索"按钮
- **内容区**:
  - 搜索前:显示历史记录和热门搜索
  - 输入中:显示搜索建议
  - 搜索后:显示搜索结果

### 搜索框
- 占位符:"搜索更多"
- 输入时显示清除按钮(×)
- 右侧:"搜索"按钮(紫色)
- 自动获取焦点,弹出键盘

### 历史记录
- 标题:"历史记录"
- 显示最多10条历史
- 每条历史显示为圆角矩形标签
- 标签样式:白色背景 + 灰色边框
- 长按标签可删除
- 点击标签执行搜索

### 热门搜索(可选)
- 标题:"热门搜索"
- 显示热门关键词列表
- 标签样式:白色背景 + 灰色边框
- 热门标签可能有"热"图标或火焰图标
- 点击标签执行搜索

### 搜索建议
- 覆盖在搜索框下方
- 列表形式显示建议项
- 每项显示:
  - 图标(用户头像或话题图标)
  - 建议文本(关键词高亮)
  - 类型标识或额外信息
- 点击建议项:填充并执行搜索

---

## 搜索结果页面详细说明

### 页面结构
- **顶部**: 返回按钮 + 搜索框 + "搜索"按钮
- **Tab栏**: 全部 | 用户 | 下单 | 话题
- **内容区**: 对应Tab的搜索结果列表

### Tab栏
- 4个Tab:全部、用户、下单、话题
- 激活Tab:紫色文字 + 底部紫色下划线(2-3px)
- 未激活Tab:黑色文字
- Tab可能显示结果数量(如:"用户(123)")

### 全部Tab
- **布局**: 瀑布流/网格布局(2列)
- **内容**: 混合显示帖子、视频、用户
- **卡片内容**:
  - 缩略图(正方形或16:9)
  - 视频:左上角播放图标
  - 底部信息栏:
    - 用户头像(小,圆形)
    - 用户昵称
    - 点赞数(心形图标 + 数字)
  - 描述文字(如:"请你们看看")

### 用户Tab
- **布局**: 垂直列表
- **用户卡片**:
  - 左侧:圆形头像(约60x60)
  - 右侧:
    - 第一行:昵称 + 性别/年龄图标(如:"♂ 19")
    - 第二行:"实名认证"标签(蓝色背景)
    - 第三行:个性签名(灰色小字)
    - 右上角:关注按钮
- **关注按钮**:
  - "关注":紫色边框,白色背景
  - "已关注":灰色边框,白色背景
  - "互相关注":紫色填充,白色文字

### 下单Tab
- **布局**: 垂直列表
- **用户卡片**(与限时专享相同):
  - 左侧:正方形头像(约80x80)
  - 右侧:
    - 昵称 + 性别图标 + 距离(如:"3.2km")
    - 标签行(横向滚动)
    - 描述文字(最多2行)
    - 价格(红色加粗,如:"10 金币/单")

### 话题Tab
- **布局**: 垂直列表
- **话题卡片**:
  - 左侧:话题图标(正方形,约60x60,圆角)
  - 右侧:
    - 第一行:话题名称 + "热门"标签(橙色)
    - 第二行:话题描述(灰色,最多2行)

---

## 性能优化建议

### 搜索功能
- **搜索建议**: 使用防抖(300ms),减少请求频率
- **搜索历史**: 本地缓存,优先读取本地数据
- **热门搜索**: 缓存1小时,减少服务器压力

### 搜索结果
- **图片懒加载**: 仅加载可见区域的图片
- **图片压缩**: 缩略图使用小尺寸
- **分页加载**: 合理设置每页数量
- **骨架屏**: 加载时显示占位UI

### 状态管理
- **Tab状态**: 各Tab独立维护分页状态
- **搜索缓存**: 缓存最近的搜索结果(5分钟)
- **关注状态**: 全局缓存用户关系,避免重复请求

### 用户体验
- **即时反馈**: 输入、点击立即响应
- **加载动画**: 减少等待感
- **错误提示**: 清晰的错误信息和重试入口

---

## 业务规则说明

### 搜索范围
- **全部**: 综合搜索,包含帖子、视频、用户
- **用户**: 搜索用户昵称、个性签名
- **下单**: 搜索可接单的用户(基于技能、服务等)
- **话题**: 搜索话题名称、话题描述

### 搜索排序
- **全部Tab**: 综合排序(相关度 + 热度 + 时间)
- **用户Tab**: 相关度优先,实名认证用户靠前
- **下单Tab**: 综合排序(相关度 + 评分 + 距离)
- **话题Tab**: 相关度优先,热门话题靠前

### 搜索关键词匹配
- 支持模糊匹配
- 支持拼音搜索(可选)
- 支持分词搜索(中文)
- 高亮匹配的关键词部分

### 搜索历史规则
- 自动保存搜索关键词
- 重复搜索同一关键词:更新时间并移到首位
- 最多保存50条
- 超过50条:删除最旧的记录
- 本地缓存30天,过期自动清除

### 关注规则
- 需要登录
- 不能关注自己
- 关注后对方收到通知(可选)
- 支持双向关注(互相关注)

---

## 测试要点

### 搜索功能
- [ ] 搜索页面正常打开
- [ ] 搜索历史正确显示
- [ ] 搜索建议实时显示
- [ ] 点击历史/建议正确执行搜索
- [ ] 输入关键词防抖工作正常
- [ ] 清空搜索框功能正常

### 搜索结果
- [ ] 4个Tab正确显示
- [ ] 各Tab结果正确加载
- [ ] Tab切换正常工作
- [ ] 无结果时显示正确提示
- [ ] 分页加载正常
- [ ] 点击内容/用户/话题正确跳转

### 用户关注
- [ ] 关注按钮状态正确显示
- [ ] 点击关注/取消关注正常工作
- [ ] 关注状态同步更新
- [ ] 未登录时提示登录
- [ ] 防抖处理正常工作

### 搜索历史
- [ ] 历史记录正确保存
- [ ] 重复搜索关键词正确处理
- [ ] 长按删除单条历史
- [ ] 清空所有历史正常工作
- [ ] 历史记录数量限制正常

### 边界测试
- [ ] 空关键词的处理
- [ ] 超长关键词的处理
- [ ] 特殊字符的处理
- [ ] 网络异常的错误处理
- [ ] 搜索无结果的提示
- [ ] 无更多数据时的提示

### 兼容性测试
- [ ] 不同Tab的搜索结果正确
- [ ] 关键词高亮正确显示
- [ ] 图片/视频正确显示
- [ ] 瀑布流/列表布局正常
- [ ] 加载动画正常显示

---
