# æˆ‘çš„å‘å¸ƒç®¡ç† Quick-Understanding

> **Quick Reference**
> | é¡¹ç›® | å€¼ |
> |------|-----|
> | è·¯ç”± | `/profile/my-publications` â†’ `/profile/skill/:id` â†’ `/publication/accept-order/edit/:id?` |
> | æ•°æ®æ¨¡å‹ | `SkillItem` (åˆ—è¡¨) â†’ `SkillDetail` (è¯¦æƒ…) â† `skills` (DB) |
> | ä¸»è¡¨ | `skills` + `skill_config` + `skill_rank_config` + `skill_images` + `skill_promises` |
> | APIå‰ç¼€ | `/api/skill/` |
> | ç»“æ„æ–‡æ¡£ | 3ä¸ª (åˆ—è¡¨/è¯¦æƒ…/ç¼–è¾‘) âœ… 100% v2.0 |

> âš ï¸ **æ•°æ®åº“å¯¹é½è¯´æ˜ (v2.0)**
> | UIæ¦‚å¿µ | å®é™…DBè¡¨ | è¯´æ˜ |
> |--------|----------|------|
> | CategoryItem | `skill_config` | æŠ€èƒ½é…ç½®è¡¨ |
> | type: game/life | `skill_type: online/offline` | ç®€åŒ–ä¸º2ç±» |
> | RankOption | `skill_rank_config` | æ®µä½é…ç½®è¡¨ (å«serverå­—æ®µ) |
> | publications | `skills` | æŠ€èƒ½ä¸»è¡¨ |
> | MediaItem | `skill_images` | æŠ€èƒ½å±•ç¤ºå›¾ç‰‡è¡¨ |
> | API: /api/publication/ | /api/skill/ | å®é™…APIå‰ç¼€ |
>
> ğŸ“ æ•°æ®åº“: `xypai_user` (v1.0.10)
> ğŸ“ SQLæ–‡ä»¶: `xypai-modules/xypai-user/sql/xypai_user.sql`

## ğŸ“Œ æ ¸å¿ƒå®šä½
ç”¨æˆ·å‘å¸ƒå†…å®¹ï¼ˆæ¥å•/æŠ€èƒ½æœåŠ¡ï¼‰çš„ç®¡ç†æ¨¡å—ï¼ŒåŒ…å«å‘å¸ƒåˆ—è¡¨ã€è¯¦æƒ…æŸ¥çœ‹ã€ç¼–è¾‘ç®¡ç†åŠŸèƒ½ã€‚

**é¡µé¢å…¥å£**: æˆ‘çš„ â†’ æˆ‘çš„å‘å¸ƒ
**é¡µé¢æ ‡è¯†**: MyPublicationsPage
**æ‰€å±æ¨¡å—**: Profile/Publication

## ğŸ¯ ä¸»è¦åŠŸèƒ½
- **å‘å¸ƒåˆ—è¡¨**: æŸ¥çœ‹æ‰€æœ‰å‘å¸ƒæœåŠ¡(æ”¯æŒå¤šç±»å‹)
- **å‘å¸ƒè¯¦æƒ…**: è¯¦ç»†ä¿¡æ¯ + è¯„ä»· + ç®¡ç†æ“ä½œ
- **æ–°å»º/ç¼–è¾‘**: åˆ›å»ºæˆ–ç¼–è¾‘å‘å¸ƒ

## ğŸ“Š çŠ¶æ€æ€»è§ˆ

| é¡µé¢ | è·¯å¾„ | æˆªå›¾ | ç»“æ„æ–‡æ¡£ | çŠ¶æ€ |
|------|------|------|----------|------|
| åˆ—è¡¨é¡µ | `æˆ‘çš„å‘å¸ƒ/` | âœ… | âœ… `æˆ‘çš„å‘å¸ƒ_ç»“æ„æ–‡æ¡£.md` | âœ… |
| è¯¦æƒ…é¡µ | `æˆ‘çš„-æˆ‘çš„å‘å¸ƒ-è¯¦æƒ…/` | âœ… 3å¼  | âœ… `æˆ‘çš„å‘å¸ƒè¯¦æƒ…_ç»“æ„æ–‡æ¡£.md` | âœ… |
| ç¼–è¾‘é¡µ | `æˆ‘çš„-æˆ‘çš„å‘å¸ƒ-è¯¦æƒ…-ç®¡ç†-ç¼–è¾‘/` | âœ… | âœ… | âœ… |

```
Total: 3 pages â†’ âœ… Complete: 3 (100%)
```

## ğŸ“¦ æ•°æ®æ¨¡å‹

### SkillConfigItem - æŠ€èƒ½é…ç½®é¡¹ (æ˜ å°„ skill_config è¡¨)
```
SkillConfigItem                   # ç¼–è¾‘é¡µæŠ€èƒ½ç±»åˆ«é€‰æ‹©
â”œâ”€â”€ configId: Long               # skill_config.config_id
â”œâ”€â”€ name: String                 # skill_config.name (ç‹è€…è£è€€/æ¢åº—ç­‰)
â”œâ”€â”€ icon: String                 # skill_config.icon
â”œâ”€â”€ skillType: String            # online|offline (skill_config.skill_type)
â”œâ”€â”€ category: String?            # skill_config.category (æ¸¸æˆ|ç”Ÿæ´»|è¿åŠ¨|å¨±ä¹|æœåŠ¡)
â”œâ”€â”€ sortOrder: Int               # skill_config.sort_order
â””â”€â”€ isSelected: Boolean          # å‰ç«¯é€‰ä¸­çŠ¶æ€
```

### RankOption - æ®µä½é€‰é¡¹ (æ˜ å°„ skill_rank_config è¡¨)
```
RankOption                        # æ®µä½é€‰æ‹©å™¨é€‰é¡¹
â”œâ”€â”€ rankId: Long                 # skill_rank_config.rank_id
â”œâ”€â”€ skillConfigId: Long          # skill_rank_config.skill_config_id
â”œâ”€â”€ server: String               # skill_rank_config.server (qq|wechat|default)
â”œâ”€â”€ rankName: String             # skill_rank_config.rank_name (è£è€€ç‹è€…ç­‰)
â””â”€â”€ sortOrder: Int               # skill_rank_config.sort_order
```

### ServerOption - æœåŠ¡åŒºé€‰é¡¹
```
ServerOption                      # æœåŠ¡åŒºé€‰æ‹©å™¨é€‰é¡¹ (çº¿ä¸ŠæŠ€èƒ½)
â”œâ”€â”€ serverId: String             # qq|wechat
â””â”€â”€ serverName: String           # QQåŒº|å¾®ä¿¡åŒº
```

### SkillItem - åˆ—è¡¨é¡¹ (æ˜ å°„ skills è¡¨)
```
SkillItem
â”œâ”€â”€ skillId: Long                # skills.skill_id
â”œâ”€â”€ skillType: String            # online|offline (skills.skill_type)
â”œâ”€â”€ isOnline: Boolean            # æ˜¯å¦ä¸Šæ¶ (skills.is_online)
â”œâ”€â”€ coverImage: String           # skills.cover_image
â”œâ”€â”€ skillName: String            # skills.skill_name
â”œâ”€â”€ description: String          # skills.description
â”œâ”€â”€ priceData
â”‚   â”œâ”€â”€ price: Decimal           # skills.price
â”‚   â””â”€â”€ unit: String             # skills.price_unit (å±€|å°æ—¶)
â”œâ”€â”€ statsData
â”‚   â”œâ”€â”€ rating: Decimal          # skills.rating (0-5.00)
â”‚   â”œâ”€â”€ reviewCount: Int         # skills.review_count
â”‚   â””â”€â”€ orderCount: Int          # skills.order_count
â”œâ”€â”€ typeSpecificData             # [æ ¹æ®skill_typeå­—æ®µåˆ‡æ¢]
â”‚   â”œâ”€â”€ [skill_type=online] onlineData
â”‚   â”‚   â”œâ”€â”€ gameName: String     # skills.game_name
â”‚   â”‚   â”œâ”€â”€ gameRank: String     # skills.game_rank
â”‚   â”‚   â”œâ”€â”€ peakScore: Int?      # skills.peak_score (ç‹è€…è£è€€å·…å³°åˆ†)
â”‚   â”‚   â”œâ”€â”€ gameAttrs: JSON      # skills.game_attrs {"position":[], "tags":[]}
â”‚   â”‚   â””â”€â”€ server: String       # skills.server (qq|wechat)
â”‚   â””â”€â”€ [skill_type=offline] offlineData
â”‚       â”œâ”€â”€ serviceType: String  # skills.service_type
â”‚       â”œâ”€â”€ serviceLocation: String # skills.service_location
â”‚       â”œâ”€â”€ activityTime: DateTime? # skills.activity_time
â”‚       â”œâ”€â”€ latitude: Decimal    # skills.latitude
â”‚       â””â”€â”€ longitude: Decimal   # skills.longitude
â””â”€â”€ metaData
    â”œâ”€â”€ createdAt: DateTime      # skills.created_at
    â””â”€â”€ updatedAt: DateTime      # skills.updated_at
```

### SkillDetail - è¯¦æƒ… [ç»§æ‰¿SkillItem]
```
SkillDetail
â”œâ”€â”€ [ç»§æ‰¿SkillItem]
â”œâ”€â”€ images: Array<SkillImage>    # â† skill_images è¡¨
â”œâ”€â”€ promises: Array<SkillPromise> # â† skill_promises è¡¨
â””â”€â”€ ownerInfo                    # â† users è¡¨ JOIN
    â”œâ”€â”€ userId: Long
    â”œâ”€â”€ nickname: String
    â”œâ”€â”€ avatar: String
    â”œâ”€â”€ gender: String
    â”œâ”€â”€ isRealVerified: Boolean
    â”œâ”€â”€ isGodVerified: Boolean
    â””â”€â”€ level: Int
```

### SkillImage - æŠ€èƒ½å›¾ç‰‡ (skill_images è¡¨)
```
SkillImage
â”œâ”€â”€ imageId: Long                # skill_images.image_id
â”œâ”€â”€ imageUrl: String             # skill_images.image_url
â””â”€â”€ sortOrder: Int               # skill_images.sort_order
```

### SkillPromise - æœåŠ¡æ‰¿è¯º (skill_promises è¡¨)
```
SkillPromise
â”œâ”€â”€ promiseId: Long              # skill_promises.promise_id
â”œâ”€â”€ promiseText: String          # skill_promises.promise_text
â””â”€â”€ sortOrder: Int               # skill_promises.sort_order
```

### SharedModel
| æ¨¡å‹ | ç”¨é€” | å­—æ®µ |
|------|------|------|
| PaginationInfo | åˆ†é¡µ | page, pageSize, hasMore, total |
| ActionResult | æ“ä½œç»“æœ | success, message |

## ğŸŒ³ ç»„ä»¶æ ‘

### åˆ—è¡¨é¡µ
```
ã€MyPublicationsPageã€‘[L1] /profile/my-publications
â”œâ”€â”€ NavArea [L2]
â”‚   â”œâ”€â”€ BackButton [L3]
â”‚   â””â”€â”€ Title [L3]
â””â”€â”€ ContentListArea [L2]
    â”œâ”€â”€ PublicationCard [L3] x N
    â”‚   â”œâ”€â”€ CoverSection [L4]
    â”‚   â””â”€â”€ InfoSection [L4]
    â”œâ”€â”€ EmptyState
    â””â”€â”€ EndIndicator
```

### è¯¦æƒ…é¡µ
```
ã€MySkillDetailPageã€‘[L1] /profile/skill/:id
â”œâ”€â”€ NavArea [L2]
â”‚   â””â”€â”€ ManageButton â†’ ActionSheet
â”œâ”€â”€ ContentArea [L2]
â”‚   â”œâ”€â”€ MediaArea [L3]
â”‚   â”œâ”€â”€ UserInfoSection [L3]
â”‚   â”œâ”€â”€ TagSection [L3]
â”‚   â”œâ”€â”€ DescriptionSection [L3]
â”‚   â”œâ”€â”€ PromiseSection [L3]          # â† skill_promises è¡¨
â”‚   â””â”€â”€ ReviewSection [L3]
â”‚       â””â”€â”€ ReviewItem [L4] x N
â””â”€â”€ Modals [L2]
    â”œâ”€â”€ ActionSheet
    â””â”€â”€ ConfirmModal
```

### ç¼–è¾‘é¡µ
```
ã€AcceptOrderPublishPageã€‘[L1] /publication/accept-order/edit/:id?
â”œâ”€â”€ NavArea [L2]
â”‚   â”œâ”€â”€ CancelButton [L3]
â”‚   â”œâ”€â”€ Title [L3] "æ¥å•"
â”‚   â””â”€â”€ PublishButton [L3]
â”œâ”€â”€ CategoryArea [L2]                    # â† skill_config è¡¨
â”‚   â””â”€â”€ CategoryItem [L3] x N            # SkillConfigItem
â”‚       â””â”€â”€ [icon + name]
â”œâ”€â”€ FormContentArea [L2]                 # â†’ skills è¡¨
â”‚   â”œâ”€â”€ TitleInput [L3]                  # â†’ skill_name
â”‚   â”œâ”€â”€ ContentInput [L3]                # â†’ description
â”‚   â””â”€â”€ MediaUploadArea [L3]             # â†’ skill_images è¡¨
â”‚       â”œâ”€â”€ MediaItem [L4] x N
â”‚       â””â”€â”€ AddMediaButton [L4]
â”œâ”€â”€ SettingsArea [L2]                    # â†’ skills è¡¨ (æ¡ä»¶å­—æ®µ)
â”‚   â”œâ”€â”€ ServerSettingRow [L3]            # [æ¡ä»¶:skillType=online] â†’ server
â”‚   â”œâ”€â”€ RankSettingRow [L3]              # [æ¡ä»¶:skillType=online] â†’ game_rank
â”‚   â”‚   â””â”€â”€ RankPickerModal              # â† skill_rank_config (æŒ‰serverç­›é€‰)
â”‚   â”œâ”€â”€ PriceSettingRow [L3]             # â†’ price, price_unit
â”‚   â””â”€â”€ LocationSettingRow [L3]          # [æ¡ä»¶:skillType=offline] â†’ latitude, longitude
â””â”€â”€ Modals [L2]
    â”œâ”€â”€ ServerPickerModal                # qq|wechat é€‰æ‹©
    â”œâ”€â”€ RankPickerModal                  # æ®µä½é€‰æ‹© (ä¾èµ–server)
    â”œâ”€â”€ PricePickerModal                 # ä»·æ ¼é€‰æ‹©
    â””â”€â”€ ConfirmModal                     # å–æ¶ˆç¡®è®¤
```

## ğŸ“ ç›®å½•ç»“æ„
```
æˆ‘çš„å‘å¸ƒç®¡ç†/
â”œâ”€â”€ å¿«é€Ÿç†è§£.md                    # æœ¬æ–‡æ¡£
â”œâ”€â”€ æˆ‘çš„å‘å¸ƒ_ç»“æ„æ–‡æ¡£.md            # ğŸ“‹ åˆ—è¡¨é¡µ
â”œâ”€â”€ æˆ‘çš„å‘å¸ƒ/                      # åˆ—è¡¨é¡µæˆªå›¾
â”œâ”€â”€ æˆ‘çš„-æˆ‘çš„å‘å¸ƒ-è¯¦æƒ…/             # ğŸ“± è¯¦æƒ…é¡µ + ç»“æ„æ–‡æ¡£
â””â”€â”€ æˆ‘çš„-æˆ‘çš„å‘å¸ƒ-è¯¦æƒ…-ç®¡ç†-ç¼–è¾‘/   # ğŸ“ ç¼–è¾‘é¡µ + ç»“æ„æ–‡æ¡£
```

## ğŸ—ºï¸ é¡µé¢å¯¼èˆªæµ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æˆ‘çš„é¡µé¢    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ç‚¹å‡»ã€Œæˆ‘çš„å‘å¸ƒã€
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åˆ—è¡¨é¡µ      â”‚ â† å¤šç±»å‹å¡ç‰‡åˆ—è¡¨
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
  â†“         â†“
ç‚¹å‡»å¡ç‰‡   ç‚¹å‡»ã€Œæ–°å»ºã€
  â†“         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¯¦æƒ…é¡µ      â”‚    â”‚   ç¼–è¾‘é¡µ      â”‚
â”‚ â”œ åª’ä½“è½®æ’­   â”‚    â”‚ (mode=create)â”‚
â”‚ â”œ ç”¨æˆ·ä¿¡æ¯   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”” è¯„ä»·åŒº     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ç‚¹å‡»ã€Œç®¡ç†ã€
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ActionSheet  â”‚
â”‚ â”œ ç¼–è¾‘â†’ç¼–è¾‘é¡µâ”‚
â”‚ â”” åˆ é™¤â†’ç¡®è®¤  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”‘ æ ¸å¿ƒæ¥å£

### åˆ—è¡¨é¡µ
| æ¥å£ | æ–¹æ³• | å‚æ•° | è¯´æ˜ |
|------|------|------|------|
| `/api/skill/my-list` | GET | page, pageSize | è·å–æˆ‘çš„æŠ€èƒ½åˆ—è¡¨ |
| `/api/skill/{id}` | DELETE | id (path) | åˆ é™¤æŠ€èƒ½ |

<details>
<summary>ğŸ“¦ GET /my-list å“åº”ç¤ºä¾‹</summary>

```json
{
  "code": 200,
  "data": {
    "list": [
      {
        "skillId": 1,
        "skillType": "online",
        "isOnline": true,
        "coverImage": "https://cdn.example.com/skill/wzry.png",
        "skillName": "ç‹è€…è£è€€é™ªç©",
        "description": "ç‹è€…è£è€€ç‹è€…æ®µä½ï¼Œå¯å¸¦ä¸Šåˆ†",
        "priceData": { "price": 30.00, "unit": "å±€" },
        "statsData": { "rating": 4.85, "reviewCount": 120, "orderCount": 45 },
        "typeSpecificData": {
          "onlineData": {
            "gameName": "ç‹è€…è£è€€",
            "gameRank": "è£è€€ç‹è€…",
            "peakScore": 2680,
            "gameAttrs": {"position": ["jungle"], "tags": ["è£è€€ç‹è€…"]},
            "server": "wechat"
          }
        }
      }
    ],
    "hasMore": true,
    "total": 15
  }
}
```
</details>

### è¯¦æƒ…é¡µ
| æ¥å£ | æ–¹æ³• | å‚æ•° | è¯´æ˜ |
|------|------|------|------|
| `/api/skill/{id}` | GET | id (path) | è·å–æŠ€èƒ½è¯¦æƒ… |
| `/api/skill/{id}/reviews` | GET | id, page, pageSize | è·å–æŠ€èƒ½è¯„ä»· (å¾…å®ç°) |

<details>
<summary>ğŸ“¦ GET /skill/{id} å“åº”ç¤ºä¾‹</summary>

```json
{
  "code": 200,
  "data": {
    "skillId": 1,
    "skillType": "online",
    "isOnline": true,
    "mediaData": {
      "images": [
        {"imageId": 1, "imageUrl": "https://cdn.example.com/img1.jpg", "sortOrder": 0}
      ]
    },
    "ownerInfo": {
      "userId": 1,
      "avatar": "https://cdn.example.com/avatar.jpg",
      "nickname": "æ˜µç§°123",
      "gender": "female",
      "isRealVerified": true,
      "isGodVerified": false,
      "level": 3
    },
    "priceData": {"price": 30.00, "unit": "å±€"},
    "basicInfo": {
      "skillName": "ç‹è€…è£è€€é™ªç©",
      "description": "ä¸»æ‰“é‡å…¶ä»–ä½ç½®éƒ½èƒ½è¡¥"
    },
    "statsData": {"rating": 4.85, "reviewCount": 120, "orderCount": 45},
    "typeSpecificData": {
      "onlineData": {
        "gameName": "ç‹è€…è£è€€",
        "gameRank": "è£è€€ç‹è€…",
        "peakScore": 2680,
        "server": "wechat"
      }
    },
    "promises": {
      "items": [
        {"promiseId": 1, "promiseText": "å‡†æ—¶å¼€å±€", "sortOrder": 0}
      ]
    }
  }
}
```
</details>

### ç¼–è¾‘é¡µ
| æ¥å£ | æ–¹æ³• | å‚æ•° | è¯´æ˜ |
|------|------|------|------|
| `/api/skill/config` | GET | - | è·å–æŠ€èƒ½é…ç½® (skill_config) |
| `/api/skill/rank-config` | GET | configId, server | è·å–æ®µä½é…ç½® (æŒ‰æœåŠ¡åŒºç­›é€‰) |
| `/api/skill/{id}` | GET | id (path) | è·å–æŠ€èƒ½è¯¦æƒ… (ç¼–è¾‘æ¨¡å¼å›å¡«) |
| `/api/skill/upload` | POST | file (multipart) | ä¸Šä¼ å±•ç¤ºå›¾ç‰‡ |
| `/api/skill/create` | POST | body: SkillForm | åˆ›å»ºæŠ€èƒ½ |
| `/api/skill/{id}` | PUT | id (path), body: SkillForm | æ›´æ–°æŠ€èƒ½ |

<details>
<summary>ğŸ“¦ GET /config å“åº”ç¤ºä¾‹</summary>

```json
{
  "code": 200,
  "data": {
    "configs": [
      {
        "configId": 1,
        "name": "ç‹è€…è£è€€",
        "icon": "https://cdn.example.com/skills/wzry.png",
        "skillType": "online",
        "category": "æ¸¸æˆ",
        "sortOrder": 1
      },
      {
        "configId": 5,
        "name": "æ¢åº—",
        "icon": "https://cdn.example.com/skills/tanding.png",
        "skillType": "offline",
        "category": "ç”Ÿæ´»",
        "sortOrder": 5
      }
    ]
  }
}
```
</details>

<details>
<summary>ğŸ“¦ GET /rank-config?configId=1&server=wechat å“åº”ç¤ºä¾‹</summary>

```json
{
  "code": 200,
  "data": {
    "ranks": [
      {"rankId": 1, "rankName": "æ°¸æ’é’»çŸ³", "sortOrder": 1},
      {"rankId": 2, "rankName": "è‡³å°Šæ˜Ÿè€€", "sortOrder": 2},
      {"rankId": 3, "rankName": "æœ€å¼ºç‹è€…", "sortOrder": 3},
      {"rankId": 6, "rankName": "è£è€€ç‹è€…", "sortOrder": 6},
      {"rankId": 7, "rankName": "ä¼ å¥‡ç‹è€…", "sortOrder": 7}
    ]
  }
}
```
</details>

<details>
<summary>ğŸ“¦ POST /create è¯·æ±‚å‚æ•°</summary>

```json
{
  "skillConfigId": 1,
  "skillName": "ç‹è€…è£è€€é™ªç©",
  "description": "è£è€€ç‹è€…æ®µä½ï¼Œå¯å¸¦ä¸Šåˆ†",
  "coverImage": "https://cdn.example.com/upload/xxx.jpg",
  "imageIds": [1001, 1002],
  "server": "wechat",
  "gameRank": "è£è€€ç‹è€…",
  "peakScore": 2680,
  "gameAttrs": {"position": ["jungle"], "tags": ["è£è€€ç‹è€…"]},
  "price": 30.00,
  "priceUnit": "å±€"
}
```
</details>

## ğŸ›ï¸ ä¾èµ–å…³ç³»
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  xypai-app-bff  â”‚ â† BFFèšåˆå±‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Dubbo RPC
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  xypai-user     â”‚ â† é¢†åŸŸæœåŠ¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ MyBatis Plus
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ xypai_user DB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¾ æ•°æ®å­˜å‚¨

> ğŸ“ æ•°æ®åº“: `xypai_user` (v1.0.10)
> ğŸ“ SQLæ–‡ä»¶: `xypai-modules/xypai-user/sql/xypai_user.sql`

### æ ¸å¿ƒè¡¨
| è¡¨å | è¯´æ˜ | å¯¹åº”æ¨¡å‹ |
|------|------|----------|
| `skills` | æŠ€èƒ½ä¸»è¡¨ (çº¿ä¸Š+çº¿ä¸‹ç»Ÿä¸€) | SkillItem, SkillDetail |
| `skill_images` | æŠ€èƒ½å±•ç¤ºå›¾ç‰‡ | SkillImage |
| `skill_promises` | æœåŠ¡æ‰¿è¯º | SkillPromise |
| `skill_config` | æŠ€èƒ½é…ç½®æ¨¡æ¿ (é¢„å®šä¹‰) | SkillConfigItem |
| `skill_rank_config` | æ®µä½é…ç½® (æŒ‰serveråˆ†ç»„) | RankOption |
| `users` | ç”¨æˆ·ä¿¡æ¯ | ownerInfo |

### è¡¨å…³ç³»å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     users       â”‚
â”‚  (ç”¨æˆ·åŸºæœ¬ä¿¡æ¯)   â”‚
â”‚  user_id (PK)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (1)â”€â”€â†’(N)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     skills      â”‚â”€â”€â”€â”€â†’â”‚   skill_images       â”‚
â”‚  (æŠ€èƒ½ä¸»è¡¨)      â”‚(1:N)â”‚   (å±•ç¤ºå›¾ç‰‡)          â”‚
â”‚  skill_id (PK)  â”‚     â”‚   FK: skill_id       â”‚
â”‚  user_id (FK)   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  skill_config_idâ”‚â”€â”€â”€â”€â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚(1:N)â”‚   skill_promises     â”‚
â”‚  skill_type:    â”‚     â”‚   (æœåŠ¡æ‰¿è¯º)          â”‚
â”‚  online|offline â”‚     â”‚   FK: skill_id       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (N)â†â”€â”€(1)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  skill_config   â”‚â”€â”€â”€â”€â†’â”‚  skill_rank_config   â”‚
â”‚  (æŠ€èƒ½æ¨¡æ¿)      â”‚(1:N)â”‚  (æ®µä½é…ç½®)           â”‚
â”‚  config_id (PK) â”‚     â”‚  FK: skill_config_id â”‚
â”‚  skill_type     â”‚     â”‚  server: qq|wechat   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å­—æ®µæ˜ å°„

**skills (æŠ€èƒ½ä¸»è¡¨) - æ ¸å¿ƒå­—æ®µ**
```sql
skill_id, user_id, skill_config_id,
skill_name, skill_type (online|offline), cover_image, description,
price, price_unit, is_online,
rating, review_count, order_count,
-- Online specific
game_name, game_rank, peak_score, game_attrs (JSON), server,
-- Offline specific
service_type, service_location, activity_time, latitude, longitude,
-- Audit
created_at, updated_at, deleted, version
```

**skill_images (å±•ç¤ºå›¾ç‰‡)**
```sql
image_id, skill_id (FK), image_url, sort_order,
created_at, updated_at, deleted
```

**skill_promises (æœåŠ¡æ‰¿è¯º)**
```sql
promise_id, skill_id (FK), promise_text, sort_order,
created_at, updated_at, deleted
```

**skill_config (æŠ€èƒ½é…ç½®è¡¨)**
```sql
config_id, name, icon, skill_type (online|offline), category, sort_order, status
```

**skill_rank_config (æ®µä½é…ç½®è¡¨)**
```sql
rank_id, skill_config_id (FK), server (qq|wechat|default), rank_name, sort_order, status
```

**users (ç”¨æˆ·è¡¨-å…³è”å­—æ®µ)**
```sql
user_id, nickname, avatar, gender, birthday,
level, is_real_verified, is_god_verified, is_vip
```

## ğŸ“‹ æ•°æ®æµå‘
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  ç‚¹å‡»å¡ç‰‡   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SkillItem     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚   SkillDetail   â”‚
â”‚   (åˆ—è¡¨é¡¹)       â”‚   ä¼ id     â”‚   (è¯¦æƒ…)         â”‚
â”‚   â† skills      â”‚            â”‚ â† +images+users â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                               promises â”‚(æœåŠ¡æ‰¿è¯º)
                                        â†“
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚  SkillPromise   â”‚
                               â”‚ â† skill_promisesâ”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”— å…³è”æ¨¡å—

### ä¸Šæ¸¸
| æ¨¡å— | è·¯å¾„ | å…³ç³» |
|------|------|------|
| æˆ‘çš„é¡µé¢ | [å¿«é€Ÿç†è§£.md](../ä¸ªäººé¡µ/å¿«é€Ÿç†è§£.md) | å…¥å£ |

### ä¸‹æ¸¸
| æ¨¡å— | è·¯å¾„ | å…³ç³» |
|------|------|------|
| è¯„ä»·åˆ—è¡¨ | å¾…è§„åˆ’ | è¯¦æƒ…é¡µè·³è½¬ |

### å…±äº«
| èµ„æº | ä½ç½® | è¯´æ˜ |
|------|------|------|
| è¯¦æƒ…ç»„ä»¶ | `../../é¦–é¡µ/.../çº¿ä¸Šæ¸¸æˆè¯¦æƒ…é¡µ/` | å¤ç”¨å±•ç¤ºç»„ä»¶ |
| æŠ€èƒ½æ•°æ® | `xypai-user/skills` | æŠ€èƒ½ä¸»è¡¨ |
| æŠ€èƒ½é…ç½® | `xypai-user/skill_config` | é¢„å®šä¹‰æŠ€èƒ½æ¨¡æ¿ |

## ğŸ”„ å˜æ›´å½±å“

| å˜æ›´ç±»å‹ | å½±å“æ¨¡å— | éœ€æ›´æ–° |
|----------|----------|--------|
| æ–°å¢æ¥å£ | xypai-app-bff | BFFå¿«é€Ÿç†è§£ |
| æ–°å¢é¡µé¢ | æœ¬æ¨¡å— | çŠ¶æ€æ€»è§ˆè¡¨ |
| ä¿®æ”¹æ•°æ®æ¨¡å‹ | å‰ç«¯+åç«¯ | åŒæ–¹å¿«é€Ÿç†è§£ |
| æ–°å¢æŠ€èƒ½ç±»å‹ | skill_configè¡¨ + å‰ç«¯ | é…ç½®æ•°æ®+UI |
| æ–°å¢/ä¿®æ”¹æ®µä½ | skill_rank_configè¡¨ | æŒ‰serveråˆ†ç»„é…ç½® |
| æ–°å¢æœåŠ¡åŒº | skill_rank_configè¡¨ + å‰ç«¯ | æ®µä½é…ç½®+UIé€‰æ‹©å™¨ |

## ğŸ“Œ å¼€å‘æŒ‡å¼•

1. **æ•°æ®å¤ç”¨**: æ–°é¡µé¢å¤ç”¨ `SkillItem`/`SkillDetail`/`SkillConfigItem`
2. **ç±»å‹æ‰©å±•**: æ–°æŠ€èƒ½ç±»å‹é€šè¿‡ `skill_config` è¡¨é…ç½®ï¼Œæ— éœ€æ”¹ä»£ç 
3. **æ¥å£è§„èŒƒ**: ç»Ÿä¸€ä½¿ç”¨ `/api/skill/` å‰ç¼€
4. **å›¾ç‰‡é™åˆ¶**: `skill_images` æœ€å¤š9å¼ 
5. **ç»Ÿä¸€è¡¨ç»“æ„**: çº¿ä¸Š/çº¿ä¸‹æŠ€èƒ½ä½¿ç”¨åŒä¸€å¼  `skills` è¡¨ï¼Œé€šè¿‡ `skill_type` åŒºåˆ†
6. **JSONå­—æ®µ**: `game_attrs` æ”¯æŒçµæ´»çš„ä½ç½®/æ ‡ç­¾ç­›é€‰
7. **æœåŠ¡åŒºä¾èµ–**: æ®µä½é€‰æ‹©ä¾èµ–æœåŠ¡åŒº (server)ï¼Œå…ˆé€‰æœåŠ¡åŒºå†é€‰æ®µä½
8. **æœåŠ¡åŒºé€‰é¡¹**: çº¿ä¸ŠæŠ€èƒ½ `server` å­—æ®µå€¼: `qq`(QQåŒº) | `wechat`(å¾®ä¿¡åŒº)

---
**æœ€åæ›´æ–°**: 2025-12-09 (v2.0 æ•°æ®åº“å¯¹é½)